{"version":3,"file":"4-a6773f00.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/experience/_page.server.js","../../../.svelte-kit/adapter-node/nodes/4.js"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\nimport { h as get_store_value } from \"../../../chunks/index3.js\";\nimport { u as user, c as currentDate } from \"../../../chunks/stores.js\";\nconst prisma = new PrismaClient();\nvar foodNutrition = \"wait for it...\";\nvar dbData = [];\nvar allFoods = [];\nvar currDate = \"\";\nconst load = async ({ cookies }) => {\n  currDate = get_store_value(currentDate);\n  console.log(\"current date: \" + JSON.stringify(currDate));\n  await loadData();\n  return {\n    /**\n     * Get nutrition data from the server\n     */\n    kcals: foodNutrition,\n    rowData: dbData,\n    foodReferences: allFoods,\n    forDate: currDate\n  };\n};\nasync function loadData() {\n  dbData = await prisma.foodLog.findMany({\n    where: {\n      user_id: user.name\n    }\n  });\n  allFoods = await prisma.foodReference.findMany({\n    where: {\n      user_id: user.name\n    },\n    orderBy: {\n      /* sort by date added, desc */\n      createdAt: \"desc\"\n    },\n    take: 12\n  });\n}\nconst actions = {\n  /**\n   * Modify game state in reaction to a keypress. If client-side JavaScript\n   * is available, this will happen in the browser instead of here\n   */\n  addfood: async ({ request, cookies }) => {\n    const data = await request.formData();\n    const nutritionData = JSON.parse(data.get(\"food\"));\n    if (Object.keys(nutritionData).length === 0)\n      ;\n    else {\n      await prisma.foodLog.create({\n        data: {\n          user_id: user.name,\n          food_name: nutritionData.food_name,\n          food_qty: nutritionData.food_qty,\n          fat_grams: nutritionData.fat_grams,\n          carbs_grams: nutritionData.carbs_grams,\n          protein_grams: nutritionData.protein_grams,\n          kkcals: nutritionData.kkcals,\n          feeding_date: currDate\n        }\n      });\n    }\n    return {\n      location: \"/foodlog\"\n    };\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/experience/_page.server.js';\n\nexport const index = 4;\nexport const component = async () => (await import('../entries/pages/experience/_page.svelte.js')).default;\nexport const file = '_app/immutable/components/pages/experience/_page.svelte-3b4438ea.js';\nexport { server };\nexport const imports = [\"_app/immutable/components/pages/experience/_page.svelte-3b4438ea.js\",\"_app/immutable/chunks/index-188eb586.js\"];\nexport const stylesheets = [\"_app/immutable/assets/_page-a9294dc1.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;;AAGA,MAAM,MAAM,GAAG,IAAI,YAAY,EAAE,CAAC;AAClC,IAAI,aAAa,GAAG,gBAAgB,CAAC;AACrC,IAAI,MAAM,GAAG,EAAE,CAAC;AAChB,IAAI,QAAQ,GAAG,EAAE,CAAC;AAClB,IAAI,QAAQ,GAAG,EAAE,CAAC;AAClB,MAAM,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,KAAK;AACpC,EAAE,QAAQ,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC;AAC1C,EAAE,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC3D,EAAE,MAAM,QAAQ,EAAE,CAAC;AACnB,EAAE,OAAO;AACT;AACA;AACA;AACA,IAAI,KAAK,EAAE,aAAa;AACxB,IAAI,OAAO,EAAE,MAAM;AACnB,IAAI,cAAc,EAAE,QAAQ;AAC5B,IAAI,OAAO,EAAE,QAAQ;AACrB,GAAG,CAAC;AACJ,CAAC,CAAC;AACF,eAAe,QAAQ,GAAG;AAC1B,EAAE,MAAM,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;AACzC,IAAI,KAAK,EAAE;AACX,MAAM,OAAO,EAAE,IAAI,CAAC,IAAI;AACxB,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,QAAQ,GAAG,MAAM,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC;AACjD,IAAI,KAAK,EAAE;AACX,MAAM,OAAO,EAAE,IAAI,CAAC,IAAI;AACxB,KAAK;AACL,IAAI,OAAO,EAAE;AACb;AACA,MAAM,SAAS,EAAE,MAAM;AACvB,KAAK;AACL,IAAI,IAAI,EAAE,EAAE;AACZ,GAAG,CAAC,CAAC;AACL,CAAC;AACD,MAAM,OAAO,GAAG;AAChB;AACA;AACA;AACA;AACA,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK;AAC3C,IAAI,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,EAAE,CAAC;AAC1C,IAAI,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;AACvD,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,MAAM,KAAK,CAAC;AAC/C,MAAM,CAAC;AACP,SAAS;AACT,MAAM,MAAM,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;AAClC,QAAQ,IAAI,EAAE;AACd,UAAU,OAAO,EAAE,IAAI,CAAC,IAAI;AAC5B,UAAU,SAAS,EAAE,aAAa,CAAC,SAAS;AAC5C,UAAU,QAAQ,EAAE,aAAa,CAAC,QAAQ;AAC1C,UAAU,SAAS,EAAE,aAAa,CAAC,SAAS;AAC5C,UAAU,WAAW,EAAE,aAAa,CAAC,WAAW;AAChD,UAAU,aAAa,EAAE,aAAa,CAAC,aAAa;AACpD,UAAU,MAAM,EAAE,aAAa,CAAC,MAAM;AACtC,UAAU,YAAY,EAAE,QAAQ;AAChC,SAAS;AACT,OAAO,CAAC,CAAC;AACT,KAAK;AACL,IAAI,OAAO;AACX,MAAM,QAAQ,EAAE,UAAU;AAC1B,KAAK,CAAC;AACN,GAAG;AACH,CAAC;;;;;;;;ACjEW,MAAC,KAAK,GAAG,EAAE;AACX,MAAC,SAAS,GAAG,YAAY,CAAC,MAAM,OAAO,4BAA6C,CAAC,EAAE,QAAQ;AAC/F,MAAC,IAAI,GAAG,sEAAsE;AAE9E,MAAC,OAAO,GAAG,CAAC,qEAAqE,CAAC,yCAAyC,EAAE;AAC7H,MAAC,WAAW,GAAG,CAAC,0CAA0C,EAAE;AAC5D,MAAC,KAAK,GAAG;;;;"}