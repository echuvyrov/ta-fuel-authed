{"version":3,"file":"8-66a1d352.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/traininglog/_date_/_page.server.js","../../../.svelte-kit/adapter-node/nodes/8.js"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\nimport { u as user } from \"../../../../chunks/stores.js\";\nimport { T as TrainingSmartAIThingie } from \"../../../../chunks/SmartAIThingie.js\";\nconst prisma = new PrismaClient();\nvar forDate = \"\";\nconst load = async ({ params }) => {\n  var trainingDataForDay = [\n    { \"exercise\": \"Push-ups\", \"exercise_date\": \"2022-01-01\" },\n    { \"exercise\": \"Squats\", \"exercise_date\": \"2022-01-02\" },\n    { \"exercise\": \"Sit-ups\", \"exercise_date\": \"2022-01-03\" }\n  ];\n  if (!params.date) {\n    forDate = new Date().toString().split(\"T\")[0];\n  } else {\n    forDate = params.date;\n  }\n  var currentTrainingProgramDays = await loadTraining(forDate);\n  if (currentTrainingProgramDays == null) {\n    currentTrainingProgramDays = { training_days: [] };\n  } else {\n    currentTrainingProgramDays.training_days.sort((a, b) => a.day_order_num > b.day_order_num ? 1 : -1);\n  }\n  return {\n    trainingProgamDays: currentTrainingProgramDays,\n    trainingData: trainingDataForDay\n  };\n};\nconst actions = {\n  createprogram: async ({ request, cookies }) => {\n    const data = await request.formData();\n    const trainingProgramRaw = data.get(\"trainingprogram\");\n    var trainingProgramDays = await TrainingSmartAIThingie.askForTrainingProgramJSON(trainingProgramRaw);\n    var trainingProgramName = \"New Program \" + new Date().toLocaleDateString();\n    var trainingProgramNameEndDate = new Date();\n    trainingProgramNameEndDate.setFullYear(trainingProgramNameEndDate.getFullYear() + 7);\n    const newTrainingProgram = await prisma.trainingProgram.create({\n      data: {\n        user_id: user.name,\n        program_name: trainingProgramName,\n        end_date: trainingProgramNameEndDate\n      }\n    });\n    for (var i = 0; i < trainingProgramDays.length; i++) {\n      await prisma.trainingProgramDay.create({\n        data: {\n          user_id: user.name,\n          program: {\n            connect: {\n              id: newTrainingProgram.id\n            }\n          },\n          day_order_num: i,\n          end_date: trainingProgramNameEndDate,\n          day_name: trainingProgramDays[i].day_name,\n          day_description: trainingProgramDays[i].day_description\n        }\n      });\n    }\n  }\n};\nasync function loadTraining(date) {\n  var trainingData = await prisma.trainingProgram.findFirst({\n    where: {\n      user_id: user.name,\n      end_date: {\n        gte: new Date(date)\n      }\n    },\n    // include the training days for the training program\n    include: {\n      training_days: true\n    }\n  });\n  return trainingData;\n}\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/traininglog/_date_/_page.server.js';\n\nexport const index = 8;\nexport const component = async () => (await import('../entries/pages/traininglog/_date_/_page.svelte.js')).default;\nexport const file = '_app/immutable/components/pages/traininglog/_date_/_page.svelte-ef58a016.js';\nexport { server };\nexport const imports = [\"_app/immutable/components/pages/traininglog/_date_/_page.svelte-ef58a016.js\",\"_app/immutable/chunks/index-188eb586.js\",\"_app/immutable/chunks/ArrowUp.svelte_svelte_type_style_lang-146fd073.js\"];\nexport const stylesheets = [\"_app/immutable/assets/_page-00f3fc8b.css\",\"_app/immutable/assets/ArrowUp-d004936d.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}