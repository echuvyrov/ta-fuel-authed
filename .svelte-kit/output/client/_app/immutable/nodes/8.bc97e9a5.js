import{S as ge,i as ve,s as _e,k as g,q as X,a as j,l as v,m as E,r as Q,h as n,c as R,n as l,b as P,D as d,T as me,P as ee,g as M,v as ie,d as B,f as fe,U as be,V as We,y as ae,z as se,p as O,A as le,B as ne,E as he,e as De,o as Le,O as $e,w as Ie}from"../chunks/index.2f3c9293.js";import"../chunks/index.745f23a9.js";import"../chunks/stores.61120b96.js";import{G as Ce}from"../chunks/ag-theme-alpine.28590e6d.js";import{T as Ke}from"../chunks/Typeahead.3433a08a.js";/* empty css                                                      */import{C as ye}from"../chunks/Chasing.45e5672d.js";function Se(a){let e,o,t;return o=new ye({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=g("div"),ae(o.$$.fragment),this.h()},l(s){e=v(s,"DIV",{style:!0});var r=E(e);se(o.$$.fragment,r),r.forEach(n),this.h()},h(){O(e,"display","flex"),O(e,"justify-content","center"),O(e,"padding","10px")},m(s,r){P(s,e,r),le(o,e,null),t=!0},i(s){t||(M(o.$$.fragment,s),t=!0)},o(s){B(o.$$.fragment,s),t=!1},d(s){s&&n(e),ne(o)}}}function Fe(a){let e,o;return{c(){e=g("textarea"),this.h()},l(t){e=v(t,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),E(e).forEach(n),this.h()},h(){l(e,"name","receiverecipe"),l(e,"rows","10"),l(e,"cols","50"),e.value=o=a[7](a[0])+`
				`,l(e,"class","svelte-1en67h7")},m(t,s){P(t,e,s)},p(t,s){s&1&&o!==(o=t[7](t[0])+`
				`)&&(e.value=o)},d(t){t&&n(e)}}}function Ve(a){let e,o,t,s,r,h,i,f,w,k,_,I,y,A,b,C;return{c(){e=g("input"),o=j(),t=g("input"),s=j(),r=g("input"),h=j(),i=g("input"),f=j(),w=g("input"),k=j(),_=g("input"),I=j(),y=g("button"),A=X("Save to Food Log"),this.h()},l(u){e=v(u,"INPUT",{type:!0,name:!0}),o=R(u),t=v(u,"INPUT",{type:!0,name:!0}),s=R(u),r=v(u,"INPUT",{type:!0,name:!0}),h=R(u),i=v(u,"INPUT",{type:!0,name:!0}),f=R(u),w=v(u,"INPUT",{type:!0,name:!0}),k=R(u),_=v(u,"INPUT",{type:!0,name:!0}),I=R(u),y=v(u,"BUTTON",{class:!0});var m=E(y);A=Q(m,"Save to Food Log"),m.forEach(n),this.h()},h(){l(e,"type","hidden"),l(e,"name","food"),e.value=a[8]().food_name,l(t,"type","hidden"),l(t,"name","food_qty"),t.value="1",l(r,"type","hidden"),l(r,"name","fat_grams"),r.value=a[8]().total_fat_grams,l(i,"type","hidden"),l(i,"name","carbs_grams"),i.value=a[8]().total_carbs_grams,l(w,"type","hidden"),l(w,"name","protein_grams"),w.value=a[8]().total_protein_grams,l(_,"type","hidden"),l(_,"name","total_kkcals"),_.value=a[8]().total_kkcals,l(y,"class","svelte-1en67h7")},m(u,m){P(u,e,m),P(u,o,m),P(u,t,m),P(u,s,m),P(u,r,m),P(u,h,m),P(u,i,m),P(u,f,m),P(u,w,m),P(u,k,m),P(u,_,m),P(u,I,m),P(u,y,m),d(y,A),b||(C=ee(y,"click",a[4]),b=!0)},p:he,d(u){u&&n(e),u&&n(o),u&&n(t),u&&n(s),u&&n(r),u&&n(h),u&&n(i),u&&n(f),u&&n(w),u&&n(k),u&&n(_),u&&n(I),u&&n(y),b=!1,C()}}}function Me(a){let e,o,t,s,r,h,i,f,w,k,_,I,y,A,b,C,u,m,S,z,p=a[1]&&Se(),F=a[0]!==""&&Fe(a),N=a[0]!==""&&Ve(a);return{c(){e=g("div"),o=g("div"),t=g("h2"),s=X(a[3]),r=j(),p&&p.c(),h=j(),i=g("form"),f=g("textarea"),w=j(),F&&F.c(),k=j(),_=g("div"),N&&N.c(),I=j(),y=g("button"),A=X("Generate Recipe"),b=j(),C=g("button"),u=X("Cancel"),this.h()},l(W){e=v(W,"DIV",{class:!0});var L=E(e);o=v(L,"DIV",{class:!0});var $=E(o);t=v($,"H2",{});var G=E(t);s=Q(G,a[3]),G.forEach(n),r=R($),p&&p.l($),h=R($),i=v($,"FORM",{name:!0,action:!0,method:!0});var J=E(i);f=v(J,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),E(f).forEach(n),w=R(J),F&&F.l(J),k=R(J),_=v(J,"DIV",{class:!0});var U=E(_);N&&N.l(U),I=R(U),y=v(U,"BUTTON",{class:!0});var q=E(y);A=Q(q,"Generate Recipe"),q.forEach(n),b=R(U),C=v(U,"BUTTON",{class:!0});var H=E(C);u=Q(H,"Cancel"),H.forEach(n),U.forEach(n),J.forEach(n),$.forEach(n),L.forEach(n),this.h()},h(){l(f,"name","askforrecipe"),l(f,"rows","10"),l(f,"cols","50"),l(f,"class","svelte-1en67h7"),l(y,"class","svelte-1en67h7"),l(C,"class","svelte-1en67h7"),l(_,"class","buttons svelte-1en67h7"),l(i,"name","macrosgenie"),l(i,"action","?/addsuggestedfood"),l(i,"method","POST"),l(o,"class","content svelte-1en67h7"),l(e,"class","modal svelte-1en67h7")},m(W,L){P(W,e,L),d(e,o),d(o,t),d(t,s),d(o,r),p&&p.m(o,null),d(o,h),d(o,i),d(i,f),me(f,a[2]),d(i,w),F&&F.m(i,null),d(i,k),d(i,_),N&&N.m(_,null),d(_,I),d(_,y),d(y,A),d(_,b),d(_,C),d(C,u),m=!0,S||(z=[ee(f,"input",a[10]),ee(y,"click",a[6]),ee(C,"click",a[5])],S=!0)},p(W,[L]){W[1]?p?L&2&&M(p,1):(p=Se(),p.c(),M(p,1),p.m(o,h)):p&&(ie(),B(p,1,1,()=>{p=null}),fe()),L&4&&me(f,W[2]),W[0]!==""?F?F.p(W,L):(F=Fe(W),F.c(),F.m(i,k)):F&&(F.d(1),F=null),W[0]!==""?N?N.p(W,L):(N=Ve(W),N.c(),N.m(_,I)):N&&(N.d(1),N=null)},i(W){m||(M(p),m=!0)},o(W){B(p),m=!1},d(W){W&&n(e),p&&p.d(),F&&F.d(),N&&N.d(),S=!1,be(z)}}}function Ue(a,e,o){let{totalsData:t}=e;const s=We();let r="";var h=!1;let i="Modify the text below (or leave as is) to generate food ideas",f=`Please suggest a vegetarian recipe to fit the following macros. 

Fat: `+t[2].fat_grams+" grams, Carbs: "+t[2].carbs_grams+` grams, 
Protein: `+t[2].protein_grams+" grams. Feel free to mix and match ingredients.";function w(){o(1,h=!0),document.forms.macrosgenie.submit(),s("save",f)}function k(){s("cancel")}async function _(b){o(1,h=!0),b.preventDefault();const u=JSON.stringify({food_for_macros:f}),m=await fetch("/foodlog/[date]/generatefoodsuggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:u}),S=await m.json();m.ok||console.log(S),o(0,r=S.generated_food),o(1,h=!1)}function I(){var b="",C=JSON.parse(r);return b=C.food_name+`
`+C.food_description+`

`+C.food_recipe+`
`,b+=`

Fat: `+C.total_fat_grams+" grams, Carbs: "+C.total_carbs_grams+" grams, Protein: "+C.total_protein_grams+" grams.",b}function y(){return JSON.parse(r)}function A(){f=this.value,o(2,f)}return a.$$set=b=>{"totalsData"in b&&o(9,t=b.totalsData)},[r,h,f,i,w,k,_,I,y,t,A]}class Ge extends ge{constructor(e){super(),ve(this,e,Ue,Me,_e,{totalsData:9})}}function Ne(a){let e,o,t;return o=new ye({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=g("div"),ae(o.$$.fragment),this.h()},l(s){e=v(s,"DIV",{style:!0});var r=E(e);se(o.$$.fragment,r),r.forEach(n),this.h()},h(){O(e,"display","flex"),O(e,"justify-content","center"),O(e,"padding","10px")},m(s,r){P(s,e,r),le(o,e,null),t=!0},i(s){t||(M(o.$$.fragment,s),t=!0)},o(s){B(o.$$.fragment,s),t=!1},d(s){s&&n(e),ne(o)}}}function ze(a){let e,o;return{c(){e=g("textarea"),this.h()},l(t){e=v(t,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),E(e).forEach(n),this.h()},h(){l(e,"name","receiverecipe"),l(e,"rows","10"),l(e,"cols","50"),e.value=o=a[6](a[0])+`
				`,l(e,"class","svelte-1en67h7")},m(t,s){P(t,e,s)},p(t,s){s&1&&o!==(o=t[6](t[0])+`
				`)&&(e.value=o)},d(t){t&&n(e)}}}function Oe(a){let e,o,t,s,r,h,i;return{c(){e=g("button"),o=X("Add to today's food log"),t=j(),s=g("button"),r=X("Re-veganize"),this.h()},l(f){e=v(f,"BUTTON",{class:!0});var w=E(e);o=Q(w,"Add to today's food log"),w.forEach(n),t=R(f),s=v(f,"BUTTON",{class:!0});var k=E(s);r=Q(k,"Re-veganize"),k.forEach(n),this.h()},h(){l(e,"class","svelte-1en67h7"),l(s,"class","svelte-1en67h7")},m(f,w){P(f,e,w),d(e,o),P(f,t,w),P(f,s,w),d(s,r),h||(i=[ee(e,"click",a[5]),ee(s,"click",a[5])],h=!0)},p:he,d(f){f&&n(e),f&&n(t),f&&n(s),h=!1,be(i)}}}function Be(a){let e,o,t,s,r,h,i,f,w,k,_,I,y,A,b,C,u,m=a[1]&&Ne(),S=a[0]!==""&&ze(a),z=a[0]!==""&&Oe(a);return{c(){e=g("div"),o=g("div"),t=g("h2"),s=X(a[3]),r=j(),m&&m.c(),h=j(),i=g("form"),f=g("textarea"),w=j(),S&&S.c(),k=j(),_=g("div"),z&&z.c(),I=j(),y=g("button"),A=X("Cancel"),this.h()},l(p){e=v(p,"DIV",{class:!0});var F=E(e);o=v(F,"DIV",{class:!0});var N=E(o);t=v(N,"H2",{});var W=E(t);s=Q(W,a[3]),W.forEach(n),r=R(N),m&&m.l(N),h=R(N),i=v(N,"FORM",{name:!0,action:!0,method:!0});var L=E(i);f=v(L,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),E(f).forEach(n),w=R(L),S&&S.l(L),k=R(L),_=v(L,"DIV",{class:!0});var $=E(_);z&&z.l($),I=R($),y=v($,"BUTTON",{class:!0});var G=E(y);A=Q(G,"Cancel"),G.forEach(n),$.forEach(n),L.forEach(n),N.forEach(n),F.forEach(n),this.h()},h(){l(f,"name","veganizethis"),l(f,"rows","10"),l(f,"cols","50"),l(f,"class","svelte-1en67h7"),l(y,"class","svelte-1en67h7"),l(_,"class","buttons svelte-1en67h7"),l(i,"name","veganizer"),l(i,"action","?/addsuggestedfood"),l(i,"method","POST"),l(o,"class","content svelte-1en67h7"),l(e,"class","modal svelte-1en67h7")},m(p,F){P(p,e,F),d(e,o),d(o,t),d(t,s),d(o,r),m&&m.m(o,null),d(o,h),d(o,i),d(i,f),me(f,a[2]),d(i,w),S&&S.m(i,null),d(i,k),d(i,_),z&&z.m(_,null),d(_,I),d(_,y),d(y,A),b=!0,C||(u=[ee(f,"input",a[8]),ee(y,"click",a[4])],C=!0)},p(p,[F]){p[1]?m?F&2&&M(m,1):(m=Ne(),m.c(),M(m,1),m.m(o,h)):m&&(ie(),B(m,1,1,()=>{m=null}),fe()),F&4&&me(f,p[2]),p[0]!==""?S?S.p(p,F):(S=ze(p),S.c(),S.m(i,k)):S&&(S.d(1),S=null),p[0]!==""?z?z.p(p,F):(z=Oe(p),z.c(),z.m(_,I)):z&&(z.d(1),z=null)},i(p){b||(M(m),b=!0)},o(p){B(m),b=!1},d(p){p&&n(e),m&&m.d(),S&&S.d(),z&&z.d(),C=!1,be(u)}}}function qe(a,e,o){let{foodLog:t}=e;const s=We();let r="";var h=!1;let i="Here's how you can veganize your daily foods, click Re-veganize button to get more ideas",f=t.map(b=>b.food_name+", Fat: "+b.fat_grams+" grams, Carbs: "+b.carbs_grams+" grams, Protein: "+b.protein_grams+" grams.").join(`
`),w=`Veganizing these foods: 

`+f;function k(){s("cancel")}async function _(b){b.preventDefault(),await I()}async function I(){o(1,h=!0);const C=JSON.stringify({veganize_this_food:f}),u=await fetch("/foodlog/[date]/veganizefood",{method:"POST",headers:{"Content-Type":"application/json"},body:C}),m=await u.json();u.ok||console.log(m),o(0,r=m.generated_food),o(1,h=!1)}function y(){return r}I();function A(){w=this.value,o(2,w)}return a.$$set=b=>{"foodLog"in b&&o(7,t=b.foodLog)},[r,h,w,i,k,_,y,t,A]}class Je extends ge{constructor(e){super(),ve(this,e,qe,Be,_e,{foodLog:7})}}function Pe(a){let e,o,t;return o=new ye({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=g("div"),ae(o.$$.fragment),this.h()},l(s){e=v(s,"DIV",{style:!0});var r=E(e);se(o.$$.fragment,r),r.forEach(n),this.h()},h(){O(e,"display","flex"),O(e,"justify-content","center"),O(e,"padding","10px")},m(s,r){P(s,e,r),le(o,e,null),t=!0},i(s){t||(M(o.$$.fragment,s),t=!0)},o(s){B(o.$$.fragment,s),t=!1},d(s){s&&n(e),ne(o)}}}function je(a){let e,o;return e=new Ge({props:{totalsData:a[16]}}),e.$on("save",a[11]),e.$on("cancel",a[12]),{c(){ae(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,s){le(e,t,s),o=!0},p:he,i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){B(e.$$.fragment,t),o=!1},d(t){ne(e,t)}}}function Re(a){let e,o;return e=new Je({props:{foodLog:a[5]}}),e.$on("save",a[13]),e.$on("cancel",a[14]),{c(){ae(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,s){le(e,t,s),o=!0},p:he,i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){B(e.$$.fragment,t),o=!1},d(t){ne(e,t)}}}function He(a){let e,o,t,s,r,h,i,f,w,k,_,I,y,A,b,C,u,m,S,z,p,F,N,W,L,$,G,J,U,q,H,Y,Z,te;r=new Ke({props:{id:"foodautocomplete",name:"foodautocomplete",autofocus:!0,hideLabel:!0,focusAfterSelect:!0,placeholder:"Whatcha eatin'?",data:a[9],extract:a[10]}}),r.$on("keydown",a[15]);let K=a[1]&&Pe(),c=a[3]&&je(a),D=a[4]&&Re(a);return{c(){e=g("link"),o=j(),t=g("div"),s=g("form"),ae(r.$$.fragment),h=j(),i=g("form"),f=g("input"),w=j(),k=g("div"),_=g("div"),I=g("a"),y=g("i"),A=j(),b=g("div"),C=X("Food Log for "),u=X(a[6]),m=j(),S=g("div"),z=g("a"),p=g("i"),F=j(),K&&K.c(),N=j(),W=g("div"),L=j(),$=g("div"),G=g("div"),J=j(),U=g("div"),q=g("div"),H=j(),c&&c.c(),Y=j(),D&&D.c(),Z=De(),this.h()},l(T){e=v(T,"LINK",{rel:!0,href:!0}),o=R(T),t=v(T,"DIV",{style:!0});var V=E(t);s=v(V,"FORM",{action:!0,method:!0});var ue=E(s);se(r.$$.fragment,ue),ue.forEach(n),h=R(V),i=v(V,"FORM",{id:!0,action:!0,method:!0});var de=E(i);f=v(de,"INPUT",{type:!0,name:!0}),de.forEach(n),w=R(V),k=v(V,"DIV",{class:!0});var x=E(k);_=v(x,"DIV",{class:!0});var ce=E(_);I=v(ce,"A",{"data-sveltekit-reload":!0,href:!0});var re=E(I);y=v(re,"I",{class:!0,style:!0}),E(y).forEach(n),re.forEach(n),ce.forEach(n),A=R(x),b=v(x,"DIV",{class:!0});var oe=E(b);C=Q(oe,"Food Log for "),u=Q(oe,a[6]),oe.forEach(n),m=R(x),S=v(x,"DIV",{class:!0});var Te=E(S);z=v(Te,"A",{"data-sveltekit-reload":!0,href:!0});var Ee=E(z);p=v(Ee,"I",{class:!0,style:!0}),E(p).forEach(n),Ee.forEach(n),Te.forEach(n),x.forEach(n),F=R(V),K&&K.l(V),N=R(V),W=v(V,"DIV",{class:!0,id:!0});var Ae=E(W);Ae.forEach(n),L=R(V),$=v(V,"DIV",{style:!0});var we=E($);G=v(we,"DIV",{id:!0,class:!0,style:!0}),E(G).forEach(n),we.forEach(n),J=R(V),U=v(V,"DIV",{style:!0});var ke=E(U);q=v(ke,"DIV",{id:!0,class:!0,style:!0}),E(q).forEach(n),ke.forEach(n),V.forEach(n),H=R(T),c&&c.l(T),Y=R(T),D&&D.l(T),Z=De(),this.h()},h(){l(e,"rel","stylesheet"),l(e,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),l(s,"action","?/addfood"),l(s,"method","POST"),l(f,"type","hidden"),l(f,"name","food"),l(i,"id","foodForm"),l(i,"action","?/addfood"),l(i,"method","POST"),l(y,"class","fa fa-arrow-circle-left"),O(y,"font-size","36px"),O(y,"color","blue"),O(y,"padding","10px"),l(I,"data-sveltekit-reload",""),l(I,"href","/foodlog/"+a[8]),l(_,"class","left-image"),l(b,"class","foodheader"),l(p,"class","fa fa-arrow-circle-right"),O(p,"font-size","36px"),O(p,"color","blue"),O(p,"padding","10px"),l(z,"data-sveltekit-reload",""),l(z,"href","/foodlog/"+a[7]),l(S,"class","right-image"),l(k,"class","container"),l(W,"class","grid"),l(W,"id","foodLog"),l(G,"id","totals"),l(G,"class","ag-theme-alpine"),O(G,"height","22vh"),O(G,"width","100%"),O($,"display","flex"),O($,"justify-content","center"),O($,"align-items","center"),l(q,"id","datagrid"),l(q,"class","ag-theme-alpine"),O(q,"height","170vh"),O(q,"width","100%"),O(U,"display","flex"),O(U,"justify-content","center"),O(U,"align-items","center"),O(t,"text-align","center"),O(t,"margin","25px auto"),O(t,"width","85%"),O(t,"max-width","1200px")},m(T,V){P(T,e,V),P(T,o,V),P(T,t,V),d(t,s),le(r,s,null),d(t,h),d(t,i),d(i,f),d(t,w),d(t,k),d(k,_),d(_,I),d(I,y),d(k,A),d(k,b),d(b,C),d(b,u),d(k,m),d(k,S),d(S,z),d(z,p),d(t,F),K&&K.m(t,null),d(t,N),d(t,W),d(t,L),d(t,$),d($,G),a[18](G),d(t,J),d(t,U),d(U,q),a[19](q),P(T,H,V),c&&c.m(T,V),P(T,Y,V),D&&D.m(T,V),P(T,Z,V),te=!0},p(T,V){T[1]?K?V[0]&2&&M(K,1):(K=Pe(),K.c(),M(K,1),K.m(t,N)):K&&(ie(),B(K,1,1,()=>{K=null}),fe()),T[3]?c?(c.p(T,V),V[0]&8&&M(c,1)):(c=je(T),c.c(),M(c,1),c.m(Y.parentNode,Y)):c&&(ie(),B(c,1,1,()=>{c=null}),fe()),T[4]?D?(D.p(T,V),V[0]&16&&M(D,1)):(D=Re(T),D.c(),M(D,1),D.m(Z.parentNode,Z)):D&&(ie(),B(D,1,1,()=>{D=null}),fe())},i(T){te||(M(r.$$.fragment,T),M(K),M(c),M(D),te=!0)},o(T){B(r.$$.fragment,T),B(K),B(c),B(D),te=!1},d(T){T&&n(e),T&&n(o),T&&n(t),ne(r),K&&K.d(),a[18](null),a[19](null),T&&n(H),c&&c.d(T),T&&n(Y),D&&D.d(T),T&&n(Z)}}}function pe(a){return a.data.label==="Target Totals"}function Xe(a){for(var e=document.getElementById("foodLog").offsetWidth,o=[],t=[],s=0,r=a.columnApi.getColumns(),h=0;h<r.length;h++){let i=r[h];if(s+=i.getMinWidth(),s>e){o.push("Food"),o.push("Fat"),o.push("Carbs"),o.push("Protein"),t.push("Qty"),t.push("Kcals"),a.columnApi.setColumnsVisible(o,!0),a.columnApi.setColumnsVisible(t,!1),a.api.sizeColumnsToFit();break}}a.api.sizeColumnsToFit()}function Qe(a){for(var e=document.getElementById("totals").offsetWidth,o=[],t=[],s=0,r=a.columnApi.getColumns(),h=0;h<r.length;h++){let i=r[h];if(s+=i.getMinWidth(),s>e){o.push("Totals"),o.push("Fat"),o.push("Carbs"),o.push("Protein"),t.push("Empty"),t.push("Kcals"),a.columnApi.setColumnsVisible(o,!0),a.columnApi.setColumnsVisible(t,!1),a.api.sizeColumnsToFit();break}}a.api.sizeColumnsToFit()}async function Ye(a,e){const o=parseInt(e.protein_grams),t=parseInt(e.carbs_grams),s=parseInt(e.fat_grams),r=o*4+t*4+s*9;e.Kcals=r,a.setDataValue("Kcals",e.Kcals);const h=JSON.stringify(e),i=await fetch("/foodlog/[date]/updaterecord",{method:"POST",headers:{"Content-Type":"application/json"},body:h}),f=await i.json();return i.ok||console.log(f),f}function Ze(a,e,o){let{data:t}=e;var s,r,h=!0,i,f;let w=!1,k=!1;const _=t.rowData,I=t.today,y=new Date(I).toISOString().split("T")[0];var A=new Date(I);A.setDate(A.getDate()+1);const b=A.toISOString().split("T")[0];var C=new Date(I);C.setDate(C.getDate()-1);const u=C.toISOString().split("T")[0];let m=t.foodReferences;m.some(c=>c.food_name.indexOf("cmd")>0)||m.push({user_id:0,food_name:"💪 /cmd Suggest some food to fit my macros",food_id:0},{user_id:0,food_name:"💪 /cmd Veganize this: suggest how to convert non-vegan foods for the day to vegan (and log them)",food_id:0});const S=c=>c.food_name;function z(){o(3,w=!0)}function p(){o(3,w=!1),o(1,h=!0)}function F(){o(3,w=!1)}function N(){console.log("showVeganizeThis"),o(4,k=!0)}function W(){o(4,k=!1),o(1,h=!0)}function L(){o(4,k=!1)}t.targetTotals,t.calculatedTotals,t.differenceTotals;const $=c=>{if(c.key=="Enter"){const D=document.getElementById("foodautocomplete").value;D.includes("/cmd Suggest some food to fit my macros")?(console.log("suggest stuff"),z()):D.includes("/cmd Veganize this")?(console.log("veganize this"),N()):(document.forms.foodForm.elements.food.value=D,document.forms.foodForm.submit(),o(1,h=!0))}};let G=[{headerName:"Food",field:"food_name",editable:!0,colId:"Food",minWidth:100,align:"left"},{headerName:"Qty",field:"food_qty",editable:!0,colId:"Qty",minWidth:100},{headerName:"Fat, g",field:"fat_grams",editable:!0,colId:"Fat",minWidth:70},{headerName:"Carbs, g",field:"carbs_grams",editable:!0,colId:"Carbs",minWidth:70},{headerName:"Protein, g",field:"protein_grams",editable:!0,colId:"Protein",minWidth:70},{headerName:"Kcals",field:"kkcals",colId:"Kcals",minWidth:120}],J=[{headerName:"Totals",field:"label",editable:!1,colId:"Totals",minWidth:100,cellStyle:c=>c.value==="Target Totals"?{color:"white",backgroundColor:"lightblue"}:c.value==="Difference"?{color:"white",backgroundColor:"red"}:{color:"white",backgroundColor:"grey"}},{headerName:"",field:"",editable:!1,colId:"Empty",minWidth:100},{headerName:"Fat, g",field:"fat_grams",editable:c=>pe(c),colId:"Fat",minWidth:70},{headerName:"Carbs, g",field:"carbs_grams",editable:c=>pe(c),colId:"Carbs",minWidth:70},{headerName:"Protein, g",field:"protein_grams",editable:c=>pe(c),colId:"Protein",minWidth:70},{headerName:"Kcals",field:"kcals",editable:!1,colId:"Kcals",minWidth:120}],U=[t.targetTotals,t.calculatedTotals,t.differenceTotals];function q(c){if(c.keyCode===46){const D=H.api.getSelectedRows();H.api.applyTransaction({remove:D})}}let H={columnDefs:G,rowData:t.rowData,rowSelection:"single",onGridReady:c=>{document.addEventListener("keydown",q)},onCellValueChanged(c){c.colDef.colId!=="Kcals"&&Ye(c.node,c.data)},onGridSizeChanged:Xe},Y={columnDefs:J,rowData:U,onCellValueChanged(c){Z(c.node,c.data,c.column.colId)},onGridSizeChanged:Qe};async function Z(c,D,T){if(T==="Kcals")return;const V=parseInt(D.protein_grams),ue=parseInt(D.carbs_grams),de=parseInt(D.fat_grams),x=V*4+ue*4+de*9;D.Kcals=x,D.feeding_date=I,c.setDataValue("Kcals",D.Kcals,{suppressCellChangedEvent:!0});const ce=JSON.stringify(D),re=await fetch("/foodlog/[date]/updatetargettotals",{method:"POST",headers:{"Content-Type":"application/json"},body:ce}),oe=await re.json();return re.ok||console.log(oe),oe}Le(()=>{r=new Ce(s,H),f=new Ce(i,Y),o(1,h=!1)}),$e(()=>{r&&r.destroy(),f&&f.destroy()});function te(c){Ie[c?"unshift":"push"](()=>{i=c,o(2,i)})}function K(c){Ie[c?"unshift":"push"](()=>{s=c,o(0,s)})}return a.$$set=c=>{"data"in c&&o(17,t=c.data)},[s,h,i,w,k,_,y,b,u,m,S,p,F,W,L,$,U,t,te,K]}class nt extends ge{constructor(e){super(),ve(this,e,Ze,He,_e,{data:17},null,[-1,-1])}}export{nt as component};
