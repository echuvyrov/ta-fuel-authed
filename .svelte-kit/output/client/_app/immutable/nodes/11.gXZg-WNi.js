import{s as ke,e as h,a as P,c as g,b as O,l as ae,g as T,f as p,q as i,i as U,h as u,G as pe,A as ee,r as we,H as Te,u as L,m as he,v as xe,x as Ie,y as $e,t as Ne,d as Oe,p as Fe,j as qe,n as Se,z as Ue}from"../chunks/scheduler.D5qmQzhB.js";import{S as Ee,i as Ce,t as R,g as ue,a as J,c as ce,b as ne,d as ie,m as re,e as se}from"../chunks/index.eUYc991i.js";import{e as ge}from"../chunks/each.-oqiv04n.js";import{G as Ve}from"../chunks/ag-theme-alpine.3A7TJ96k.js";/* empty css                                                      */import{C as Pe}from"../chunks/Chasing.mmy04f5_.js";import{T as Re}from"../chunks/Typeahead.U1aXNshX.js";function _e(r){let e,a,t;return a=new Pe({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=h("div"),ne(a.$$.fragment),this.h()},l(s){e=g(s,"DIV",{style:!0});var o=O(e);ie(a.$$.fragment,o),o.forEach(p),this.h()},h(){L(e,"display","flex"),L(e,"justify-content","center"),L(e,"padding","10px")},m(s,o){U(s,e,o),re(a,e,null),t=!0},i(s){t||(R(a.$$.fragment,s),t=!0)},o(s){J(a.$$.fragment,s),t=!1},d(s){s&&p(e),se(a)}}}function Ge(r){let e,a,t,s="Create New Training Program",o,d,f,_,F,y,D,m="Save",V,x,G="Cancel",j,M,W,c=r[0]&&_e();return{c(){e=h("div"),a=h("div"),t=h("h2"),t.textContent=s,o=P(),c&&c.c(),d=P(),f=h("form"),_=h("textarea"),F=P(),y=h("div"),D=h("button"),D.textContent=m,V=P(),x=h("button"),x.textContent=G,this.h()},l(I){e=g(I,"DIV",{class:!0});var E=O(e);a=g(E,"DIV",{class:!0});var B=O(a);t=g(B,"H2",{"data-svelte-h":!0}),ae(t)!=="svelte-1mug365"&&(t.textContent=s),o=T(B),c&&c.l(B),d=T(B),f=g(B,"FORM",{action:!0,method:!0});var $=O(f);_=g($,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),O(_).forEach(p),F=T($),y=g($,"DIV",{class:!0});var H=O(y);D=g(H,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(D)!=="svelte-13jabvw"&&(D.textContent=m),V=T(H),x=g(H,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(x)!=="svelte-qt21o4"&&(x.textContent=G),H.forEach(p),$.forEach(p),B.forEach(p),E.forEach(p),this.h()},h(){i(_,"name","trainingprogram"),i(_,"rows","10"),i(_,"cols","50"),i(_,"class","svelte-1en67h7"),i(D,"class","svelte-1en67h7"),i(x,"class","svelte-1en67h7"),i(y,"class","buttons svelte-1en67h7"),i(f,"action","?/createprogram"),i(f,"method","POST"),i(a,"class","content svelte-1en67h7"),i(e,"class","modal svelte-1en67h7")},m(I,E){U(I,e,E),u(e,a),u(a,t),u(a,o),c&&c.m(a,null),u(a,d),u(a,f),u(f,_),pe(_,r[1]),u(f,F),u(f,y),u(y,D),u(y,V),u(y,x),j=!0,M||(W=[ee(_,"input",r[4]),ee(D,"click",r[2]),ee(x,"click",r[3])],M=!0)},p(I,[E]){I[0]?c?E&1&&R(c,1):(c=_e(),c.c(),R(c,1),c.m(a,d)):c&&(ue(),J(c,1,1,()=>{c=null}),ce()),E&2&&pe(_,I[1])},i(I){j||(R(c),j=!0)},o(I){J(c),j=!1},d(I){I&&p(e),c&&c.d(),M=!1,we(W)}}}function je(r,e,a){const t=Te();var s=!1;let o=`Create a training program by writing out specific training area for each day.

For example:	  
 Day 1: Squats
 Day 2: Bench Press
 Day 3: 30-45 mins cardio, light Olympic lifts
 Day 4: OFF
 Day 5: Deadlifts
 Day 6: Shoulders, Arms
 Day 7: 30-45 mins cardio, calisthenics
 Day 8: OFF`;function d(){a(0,s=!0),document.forms.trainingprogram.submit(),t("save",o)}function f(){t("cancel")}function _(){o=this.value,a(1,o)}return[s,o,d,f,_]}class Me extends Ee{constructor(e){super(),Ce(this,e,je,Ge,ke,{})}}function ye(r,e,a){const t=r.slice();return t[23]=e[a],t}function ve(r){let e,a,t;return a=new Pe({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=h("div"),ne(a.$$.fragment),this.h()},l(s){e=g(s,"DIV",{style:!0});var o=O(e);ie(a.$$.fragment,o),o.forEach(p),this.h()},h(){L(e,"display","flex"),L(e,"justify-content","center"),L(e,"padding","10px")},m(s,o){U(s,e,o),re(a,e,null),t=!0},i(s){t||(R(a.$$.fragment,s),t=!0)},o(s){J(a.$$.fragment,s),t=!1},d(s){s&&p(e),se(a)}}}function De(r){let e,a=r[23].day_description+"",t,s,o;return{c(){e=h("button"),t=Ne(a),this.h()},l(d){e=g(d,"BUTTON",{class:!0});var f=O(e);t=Oe(f,a),f.forEach(p),this.h()},h(){i(e,"class","trainingdaytab svelte-1krqaef")},m(d,f){U(d,e,f),u(e,t),s||(o=ee(e,"click",function(){Fe(r[11](r[23].day_description,r[23].id))&&r[11](r[23].day_description,r[23].id).apply(this,arguments)}),s=!0)},p(d,f){r=d,f&1&&a!==(a=r[23].day_description+"")&&qe(t,a)},d(d){d&&p(e),s=!1,o()}}}function be(r){let e,a;return e=new Me({}),e.$on("save",r[13]),e.$on("cancel",r[14]),{c(){ne(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,s){re(e,t,s),a=!0},p:Se,i(t){a||(R(e.$$.fragment,t),a=!0)},o(t){J(e.$$.fragment,t),a=!1},d(t){se(e,t)}}}function Be(r){let e,a,t,s="create new training program",o,d,f,_,F,y,D,m,V,x,G,j,M,W,c,I,E,B,$,H,l,A,q,z,S,K,te,Y,Q,le,de,w=r[2]&&ve(),Z=ge(r[0].trainingProgamDays.training_days),C=[];for(let n=0;n<Z.length;n+=1)C[n]=De(ye(r,Z,n));y=new Re({props:{id:"exerciseautocomplete",name:"exerciseautocomplete",autofocus:!0,hideLabel:!0,focusAfterSelect:!0,placeholder:"Exercise, i.e. Squat or Run",limit:5,data:r[7],extract:r[8],class:"training_input"}}),y.$on("keydown",r[10]);let b=r[3]&&be(r);return{c(){w&&w.c(),e=P(),a=h("div"),t=h("button"),t.textContent=s,o=P(),d=h("div");for(let n=0;n<C.length;n+=1)C[n].c();f=P(),_=h("div"),F=h("form"),ne(y.$$.fragment),D=P(),m=h("form"),V=h("input"),x=P(),G=h("input"),j=P(),M=h("input"),W=P(),c=h("input"),I=P(),E=h("input"),B=P(),$=h("input"),H=P(),l=h("input"),A=P(),q=h("input"),z=P(),S=h("div"),K=h("div"),te=P(),b&&b.c(),Y=he(),this.h()},l(n){w&&w.l(n),e=T(n),a=g(n,"DIV",{class:!0});var v=O(a);t=g(v,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(t)!=="svelte-pbbhdr"&&(t.textContent=s),v.forEach(p),o=T(n),d=g(n,"DIV",{class:!0});var k=O(d);for(let oe=0;oe<C.length;oe+=1)C[oe].l(k);k.forEach(p),f=T(n),_=g(n,"DIV",{class:!0});var X=O(_);F=g(X,"FORM",{action:!0,method:!0});var fe=O(F);ie(y.$$.fragment,fe),fe.forEach(p),D=T(X),m=g(X,"FORM",{id:!0,action:!0,method:!0});var N=O(m);V=g(N,"INPUT",{type:!0,name:!0}),x=T(N),G=g(N,"INPUT",{type:!0,name:!0}),j=T(N),M=g(N,"INPUT",{type:!0,name:!0}),W=T(N),c=g(N,"INPUT",{type:!0,name:!0,class:!0,width:!0}),I=T(N),E=g(N,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),B=T(N),$=g(N,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),H=T(N),l=g(N,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),A=T(N),q=g(N,"INPUT",{type:!0,class:!0}),N.forEach(p),X.forEach(p),z=T(n),S=g(n,"DIV",{style:!0});var me=O(S);K=g(me,"DIV",{id:!0,class:!0,style:!0}),O(K).forEach(p),me.forEach(p),te=T(n),b&&b.l(n),Y=he(),this.h()},h(){i(t,"class","svelte-1krqaef"),i(a,"class","newProgram svelte-1krqaef"),i(d,"class","trainingdaytabs"),i(F,"action","?/addexercise"),i(F,"method","POST"),i(V,"type","hidden"),i(V,"name","day_id"),V.value=r[4],i(G,"type","hidden"),i(G,"name","day_id"),G.value=r[5],i(M,"type","hidden"),i(M,"name","exercise_date"),M.value=r[6],i(c,"type","hidden"),i(c,"name","exercise_name"),i(c,"class","training_input svelte-1krqaef"),i(c,"width","20%"),i(E,"type","text"),i(E,"name","exercise_load"),i(E,"placeholder","Load, i.e. weight or distance"),i(E,"class","training_input svelte-1krqaef"),i(E,"width","20%"),i($,"type","text"),i($,"name","exercise_reps"),i($,"placeholder","Reps"),i($,"class","training_input svelte-1krqaef"),i($,"width","20%"),i(l,"type","text"),i(l,"name","exercise_notes"),i(l,"placeholder","Notes, i.e. how you felt or something for next time"),i(l,"class","training_input svelte-1krqaef"),i(l,"width","30%"),i(q,"type","button"),q.value="add",i(q,"class","training_input submit_button svelte-1krqaef"),i(m,"id","trainingGrid"),i(m,"action","?/addexercise"),i(m,"method","POST"),i(_,"class","exerciseandload"),i(K,"id","datagrid"),i(K,"class","ag-theme-alpine"),L(K,"height","70vh"),L(K,"width","100%"),L(S,"display","flex"),L(S,"justify-content","center"),L(S,"align-items","center")},m(n,v){w&&w.m(n,v),U(n,e,v),U(n,a,v),u(a,t),U(n,o,v),U(n,d,v);for(let k=0;k<C.length;k+=1)C[k]&&C[k].m(d,null);U(n,f,v),U(n,_,v),u(_,F),re(y,F,null),u(_,D),u(_,m),u(m,V),u(m,x),u(m,G),u(m,j),u(m,M),u(m,W),u(m,c),u(m,I),u(m,E),u(m,B),u(m,$),u(m,H),u(m,l),u(m,A),u(m,q),U(n,z,v),U(n,S,v),u(S,K),r[15](K),U(n,te,v),b&&b.m(n,v),U(n,Y,v),Q=!0,le||(de=[ee(t,"click",r[12]),ee(q,"click",r[9])],le=!0)},p(n,[v]){if(n[2]?w?v&4&&R(w,1):(w=ve(),w.c(),R(w,1),w.m(e.parentNode,e)):w&&(ue(),J(w,1,1,()=>{w=null}),ce()),v&2049){Z=ge(n[0].trainingProgamDays.training_days);let k;for(k=0;k<Z.length;k+=1){const X=ye(n,Z,k);C[k]?C[k].p(X,v):(C[k]=De(X),C[k].c(),C[k].m(d,null))}for(;k<C.length;k+=1)C[k].d(1);C.length=Z.length}(!Q||v&16)&&(V.value=n[4]),(!Q||v&32)&&(G.value=n[5]),n[3]?b?(b.p(n,v),v&8&&R(b,1)):(b=be(n),b.c(),R(b,1),b.m(Y.parentNode,Y)):b&&(ue(),J(b,1,1,()=>{b=null}),ce())},i(n){Q||(R(w),R(y.$$.fragment,n),R(b),Q=!0)},o(n){J(w),J(y.$$.fragment,n),J(b),Q=!1},d(n){n&&(p(e),p(a),p(o),p(d),p(f),p(_),p(z),p(S),p(te),p(Y)),w&&w.d(n),xe(C,n),se(y),r[15](null),b&&b.d(n),le=!1,we(de)}}}async function Ae(r,e){const a=parseInt(e.protein_grams),t=parseInt(e.carbs_grams),s=parseInt(e.fat_grams),o=a*4+t*4+s*9;e.kkcals=o,r.setDataValue("kkcals",e.kkcals);const d=JSON.stringify(e);if(!(await fetch("/reference/updaterecord",{method:"POST",headers:{"Content-Type":"application/json"},body:d})).ok)throw Error(json.message)}function ze(r,e,a){let{data:t}=e;var s,o,d=!0;let f=!1,_=0,F="";var y=[],D=[];const m=new Date,V=m.getFullYear()+"-"+("0"+(m.getMonth()+1)).slice(-2)+"-"+("0"+m.getDate()).slice(-2);let x=t.exerciseReferences;x.some(l=>l.exercise_name.indexOf("cmd")>0)||x.push({user_id:0,exercise_name:"ðŸ’ª /cmd Count KCals for the Day",exercise_id:0});const G=l=>l.exercise_name;let j={columnDefs:y,rowData:D,onCellValueChanged(l){Ae(l.node,l.data)},rowEditable:!0,onGridReady:l=>{l.api.setRowData(D)}};const M=l=>{a(2,d=!0);const A=document.getElementById("exerciseautocomplete").value;document.forms.trainingGrid.elements.exercise_name.value=A,document.forms.trainingGrid.submit()},W=l=>{l.key=="Enter"},c=(l,A)=>{var q=document.getElementsByClassName("trainingdaytab");a(4,_=A),a(5,F=l);for(var z=0;z<q.length;z++)q[z].textContent==l?(q[z].style.backgroundColor="#007aff",t.trainingProgamDays.training_days.forEach(S=>{S.day_description==l&&(D=S.training_grid,$(),j.api.setColumnDefs(y),j.api.setRowData(D))})):q[z].style.backgroundColor="#FF3E00"};Ie(()=>{if(t.trainingProgamDays!=null){var l=t.trainingProgamDays.training_days;l!=null&&t.trainingProgamDays.training_days.length>0&&(D=t.trainingProgamDays.training_days[0].training_grid,$())}o=new Ve(s,j),t.trainingProgamDays!=null&&(t.selectedDayId==""&&t.trainingProgamDays.training_days.length>0?c(t.trainingProgamDays.training_days[0].day_description,t.trainingProgamDays.training_days[0].id):c(t.selectedDayDescription,t.selectedDayId)),a(2,d=!1)}),$e(()=>{o&&o.destroy()});function I(){a(3,f=!0)}function E(l){a(3,f=!1)}function B(){a(3,f=!1)}function $(){D!=null&&(y=[],D.forEach(l=>{for(const A in l)if(l.hasOwnProperty(A)){const q={field:A,headerName:A,editable:!0,minWidth:70,width:125};y.some(S=>S.field===A)||y.push(q)}}))}function H(l){Ue[l?"unshift":"push"](()=>{s=l,a(1,s)})}return r.$$set=l=>{"data"in l&&a(0,t=l.data)},[t,s,d,f,_,F,V,x,G,M,W,c,I,E,B,H]}class Qe extends Ee{constructor(e){super(),Ce(this,e,ze,Be,ke,{data:0})}}export{Qe as component};
