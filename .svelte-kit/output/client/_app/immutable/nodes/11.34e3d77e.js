import{S as j,i as x,s as L,k as _,a as F,q as O,l as y,m as k,h as c,c as R,r as T,n as b,p as h,b as g,G as N,P as I,g as C,d as S,f as q,U as G,o as z,O as K,y as M,z as Q,A as U,B as A,v as B,w as H}from"../chunks/index.4bd8640c.js";import{G as J}from"../chunks/ag-theme-alpine.28590e6d.js";/* empty css                                                      */import{C as X}from"../chunks/Chasing.1e199912.js";function W(l){let t,a,n;return a=new X({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){t=_("div"),M(a.$$.fragment),this.h()},l(r){t=y(r,"DIV",{style:!0});var o=k(t);Q(a.$$.fragment,o),o.forEach(c),this.h()},h(){h(t,"display","flex"),h(t,"justify-content","center"),h(t,"padding","10px")},m(r,o){g(r,t,o),U(a,t,null),n=!0},i(r){n||(C(a.$$.fragment,r),n=!0)},o(r){S(a.$$.fragment,r),n=!1},d(r){r&&c(t),A(a)}}}function Y(l){let t,a,n,r,o,f,p,m,u,d,v,w,D,s=l[1]&&W();return{c(){t=_("form"),a=_("input"),n=F(),s&&s.c(),r=F(),o=_("center"),f=_("h3"),p=O("Food Reference List"),m=F(),u=_("div"),d=_("div"),this.h()},l(e){t=y(e,"FORM",{action:!0,method:!0});var i=k(t);a=y(i,"INPUT",{name:!0,class:!0}),i.forEach(c),n=R(e),s&&s.l(e),r=R(e),o=y(e,"CENTER",{});var E=k(o);f=y(E,"H3",{});var V=k(f);p=T(V,"Food Reference List"),V.forEach(c),E.forEach(c),m=R(e),u=y(e,"DIV",{style:!0});var P=k(u);d=y(P,"DIV",{id:!0,class:!0,style:!0}),k(d).forEach(c),P.forEach(c),this.h()},h(){b(a,"name","food"),a.value="Search for or add food to the reference list",b(a,"class","svelte-brt59l"),b(t,"action","?/addfood"),b(t,"method","POST"),b(d,"id","datagrid"),b(d,"class","ag-theme-alpine"),h(d,"height","70vh"),h(d,"width","100%"),h(u,"display","flex"),h(u,"justify-content","center"),h(u,"align-items","center")},m(e,i){g(e,t,i),N(t,a),g(e,n,i),s&&s.m(e,i),g(e,r,i),g(e,o,i),N(o,f),N(f,p),g(e,m,i),g(e,u,i),N(u,d),l[5](d),v=!0,w||(D=[I(a,"focus",$),I(a,"keydown",l[2]),I(a,"input",l[3])],w=!0)},p(e,[i]){e[1]?s?i&2&&C(s,1):(s=W(),s.c(),C(s,1),s.m(r.parentNode,r)):s&&(B(),S(s,1,1,()=>{s=null}),q())},i(e){v||(C(s),v=!0)},o(e){S(s),v=!1},d(e){e&&c(t),e&&c(n),s&&s.d(e),e&&c(r),e&&c(o),e&&c(m),e&&c(u),l[5](null),w=!1,G(D)}}}async function Z(l,t){const a=parseInt(t.protein_grams),n=parseInt(t.carbs_grams),r=parseInt(t.fat_grams),o=a*4+n*4+r*9;console.log("protein "+a+" fat "+r+" carbs "+n+"Kcals: "+o),t.kkcals=o,l.setDataValue("kkcals",t.kkcals);const f=JSON.stringify(t);if(!(await fetch("/reference/updaterecord",{method:"POST",headers:{"Content-Type":"application/json"},body:f})).ok)throw Error(json.message)}const $=l=>l.target.select();function ee(l,t,a){let{data:n}=t;var r,o,f=!0;let p="";var m=n.rowData;let d={columnDefs:[{headerName:"Food",field:"food_name",editable:!0,minWidth:100},{headerName:"Qty",field:"food_qty",editable:!0,minWidth:70},{headerName:"Fat, g",field:"fat_grams",editable:!0,minWidth:70},{headerName:"Carbs, g",field:"carbs_grams",editable:!0,minWidth:70},{headerName:"Protein, g",field:"protein_grams",editable:!0,minWidth:70},{headerName:"Kcals",field:"kkcals",editable:!0,minWidth:120}],rowData:m,onCellValueChanged(e){Z(e.node,e.data)}};z(()=>{o=new J(r,d),a(1,f=!1)}),K(()=>{o&&o.destroy()});const v=e=>{e.key=="Enter"&&a(1,f=!0)},w=e=>{p=e.target.value,D(),d.api.setRowData(m)};function D(){m=n.rowData.filter(e=>{const i=e.food_name.toLowerCase(),E=p.toLowerCase();return i.includes(E)})}function s(e){H[e?"unshift":"push"](()=>{r=e,a(0,r)})}return l.$$set=e=>{"data"in e&&a(4,n=e.data)},[r,f,v,w,n,s]}class oe extends j{constructor(t){super(),x(this,t,ee,Y,L,{data:4})}}export{oe as component};
