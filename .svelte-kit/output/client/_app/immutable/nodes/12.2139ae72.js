import{S as Ee,i as we,s as Pe,k as h,q as te,a as I,l as g,m as w,r as ae,h as c,c as C,n as r,b as q,G as o,T as ge,P as Z,g as M,v as fe,d as J,f as de,U as Te,V as Ce,y as ie,z as se,p as L,A as le,B as oe,e as _e,N as Ne,o as $e,O as Oe,Q as xe,u as Fe,H as Se,w as Ue}from"../chunks/index.4bd8640c.js";import{G as Ve}from"../chunks/ag-theme-alpine.28590e6d.js";/* empty css                                                      */import{C as Ie}from"../chunks/Chasing.1e199912.js";import{T as qe}from"../chunks/Typeahead.588c4d72.js";function ye(i){let e,t,a;return t=new Ie({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=h("div"),ie(t.$$.fragment),this.h()},l(s){e=g(s,"DIV",{style:!0});var u=w(e);se(t.$$.fragment,u),u.forEach(c),this.h()},h(){L(e,"display","flex"),L(e,"justify-content","center"),L(e,"padding","10px")},m(s,u){q(s,e,u),le(t,e,null),a=!0},i(s){a||(M(t.$$.fragment,s),a=!0)},o(s){J(t.$$.fragment,s),a=!1},d(s){s&&c(e),oe(t)}}}function Re(i){let e,t,a,s,u,m,p,_,S,y,b,d,R,x,G,B,j,Q,f=i[0]&&ye();return{c(){e=h("div"),t=h("div"),a=h("h2"),s=te("Create New Training Program"),u=I(),f&&f.c(),m=I(),p=h("form"),_=h("textarea"),S=I(),y=h("div"),b=h("button"),d=te("Save"),R=I(),x=h("button"),G=te("Cancel"),this.h()},l(N){e=g(N,"DIV",{class:!0});var P=w(e);t=g(P,"DIV",{class:!0});var A=w(t);a=g(A,"H2",{});var U=w(a);s=ae(U,"Create New Training Program"),U.forEach(c),u=C(A),f&&f.l(A),m=C(A),p=g(A,"FORM",{action:!0,method:!0});var H=w(p);_=g(H,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),w(_).forEach(c),S=C(H),y=g(H,"DIV",{class:!0});var l=w(y);b=g(l,"BUTTON",{class:!0});var F=w(b);d=ae(F,"Save"),F.forEach(c),R=C(l),x=g(l,"BUTTON",{class:!0});var T=w(x);G=ae(T,"Cancel"),T.forEach(c),l.forEach(c),H.forEach(c),A.forEach(c),P.forEach(c),this.h()},h(){r(_,"name","trainingprogram"),r(_,"rows","10"),r(_,"cols","50"),r(_,"class","svelte-1en67h7"),r(b,"class","svelte-1en67h7"),r(x,"class","svelte-1en67h7"),r(y,"class","buttons svelte-1en67h7"),r(p,"action","?/createprogram"),r(p,"method","POST"),r(t,"class","content svelte-1en67h7"),r(e,"class","modal svelte-1en67h7")},m(N,P){q(N,e,P),o(e,t),o(t,a),o(a,s),o(t,u),f&&f.m(t,null),o(t,m),o(t,p),o(p,_),ge(_,i[1]),o(p,S),o(p,y),o(y,b),o(b,d),o(y,R),o(y,x),o(x,G),B=!0,j||(Q=[Z(_,"input",i[4]),Z(b,"click",i[2]),Z(x,"click",i[3])],j=!0)},p(N,[P]){N[0]?f?P&1&&M(f,1):(f=ye(),f.c(),M(f,1),f.m(t,m)):f&&(fe(),J(f,1,1,()=>{f=null}),de()),P&2&&ge(_,N[1])},i(N){B||(M(f),B=!0)},o(N){J(f),B=!1},d(N){N&&c(e),f&&f.d(),j=!1,Te(Q)}}}function Ge(i,e,t){const a=Ce();var s=!1;let u=`Create a training program by writing out specific training area for each day.

For example:	  
 Day 1: Squats
 Day 2: Bench Press
 Day 3: 30-45 mins cardio, light Olympic lifts
 Day 4: OFF
 Day 5: Deadlifts
 Day 6: Shoulders, Arms
 Day 7: 30-45 mins cardio, calisthenics
 Day 8: OFF`;function m(){t(0,s=!0),document.forms.trainingprogram.submit(),a("save",u)}function p(){a("cancel")}function _(){u=this.value,t(1,u)}return[s,u,m,p,_]}class Me extends Ee{constructor(e){super(),we(this,e,Ge,Re,Pe,{})}}function ve(i,e,t){const a=i.slice();return a[23]=e[t],a}function De(i){let e,t,a;return t=new Ie({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=h("div"),ie(t.$$.fragment),this.h()},l(s){e=g(s,"DIV",{style:!0});var u=w(e);se(t.$$.fragment,u),u.forEach(c),this.h()},h(){L(e,"display","flex"),L(e,"justify-content","center"),L(e,"padding","10px")},m(s,u){q(s,e,u),le(t,e,null),a=!0},i(s){a||(M(t.$$.fragment,s),a=!0)},o(s){J(t.$$.fragment,s),a=!1},d(s){s&&c(e),oe(t)}}}function be(i){let e,t=i[23].day_description+"",a,s,u;return{c(){e=h("button"),a=te(t),this.h()},l(m){e=g(m,"BUTTON",{class:!0});var p=w(e);a=ae(p,t),p.forEach(c),this.h()},h(){r(e,"class","trainingdaytab svelte-1krqaef")},m(m,p){q(m,e,p),o(e,a),s||(u=Z(e,"click",function(){xe(i[11](i[23].day_description,i[23].id))&&i[11](i[23].day_description,i[23].id).apply(this,arguments)}),s=!0)},p(m,p){i=m,p&1&&t!==(t=i[23].day_description+"")&&Fe(a,t)},d(m){m&&c(e),s=!1,u()}}}function ke(i){let e,t;return e=new Me({}),e.$on("save",i[13]),e.$on("cancel",i[14]),{c(){ie(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,s){le(e,a,s),t=!0},p:Se,i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){J(e.$$.fragment,a),t=!1},d(a){oe(e,a)}}}function Be(i){let e,t,a,s,u,m,p,_,S,y,b,d,R,x,G,B,j,Q,f,N,P,A,U,H,l,F,T,z,V,K,ne,W,X,ce,me,k=i[2]&&De(),Y=i[0].trainingProgamDays.training_days,$=[];for(let n=0;n<Y.length;n+=1)$[n]=be(ve(i,Y,n));y=new qe({props:{id:"exerciseautocomplete",name:"exerciseautocomplete",autofocus:!0,hideLabel:!0,focusAfterSelect:!0,placeholder:"Exercise, i.e. Squat or Run",limit:5,data:i[7],extract:i[8],class:"training_input"}}),y.$on("keydown",i[10]);let D=i[3]&&ke(i);return{c(){k&&k.c(),e=I(),t=h("div"),a=h("button"),s=te("create new training program"),u=I(),m=h("div");for(let n=0;n<$.length;n+=1)$[n].c();p=I(),_=h("div"),S=h("form"),ie(y.$$.fragment),b=I(),d=h("form"),R=h("input"),x=I(),G=h("input"),B=I(),j=h("input"),Q=I(),f=h("input"),N=I(),P=h("input"),A=I(),U=h("input"),H=I(),l=h("input"),F=I(),T=h("input"),z=I(),V=h("div"),K=h("div"),ne=I(),D&&D.c(),W=_e(),this.h()},l(n){k&&k.l(n),e=C(n),t=g(n,"DIV",{class:!0});var v=w(t);a=g(v,"BUTTON",{class:!0});var E=w(a);s=ae(E,"create new training program"),E.forEach(c),v.forEach(c),u=C(n),m=g(n,"DIV",{class:!0});var ee=w(m);for(let ue=0;ue<$.length;ue+=1)$[ue].l(ee);ee.forEach(c),p=C(n),_=g(n,"DIV",{class:!0});var re=w(_);S=g(re,"FORM",{action:!0,method:!0});var pe=w(S);se(y.$$.fragment,pe),pe.forEach(c),b=C(re),d=g(re,"FORM",{id:!0,action:!0,method:!0});var O=w(d);R=g(O,"INPUT",{type:!0,name:!0}),x=C(O),G=g(O,"INPUT",{type:!0,name:!0}),B=C(O),j=g(O,"INPUT",{type:!0,name:!0}),Q=C(O),f=g(O,"INPUT",{type:!0,name:!0,class:!0,width:!0}),N=C(O),P=g(O,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),A=C(O),U=g(O,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),H=C(O),l=g(O,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),F=C(O),T=g(O,"INPUT",{type:!0,class:!0}),O.forEach(c),re.forEach(c),z=C(n),V=g(n,"DIV",{style:!0});var he=w(V);K=g(he,"DIV",{id:!0,class:!0,style:!0}),w(K).forEach(c),he.forEach(c),ne=C(n),D&&D.l(n),W=_e(),this.h()},h(){r(a,"class","svelte-1krqaef"),r(t,"class","newProgram svelte-1krqaef"),r(m,"class","trainingdaytabs"),r(S,"action","?/addexercise"),r(S,"method","POST"),r(R,"type","hidden"),r(R,"name","day_id"),R.value=i[4],r(G,"type","hidden"),r(G,"name","day_id"),G.value=i[5],r(j,"type","hidden"),r(j,"name","exercise_date"),j.value=i[6],r(f,"type","hidden"),r(f,"name","exercise_name"),r(f,"class","training_input svelte-1krqaef"),r(f,"width","20%"),r(P,"type","text"),r(P,"name","exercise_load"),r(P,"placeholder","Load, i.e. weight or distance"),r(P,"class","training_input svelte-1krqaef"),r(P,"width","20%"),r(U,"type","text"),r(U,"name","exercise_reps"),r(U,"placeholder","Reps"),r(U,"class","training_input svelte-1krqaef"),r(U,"width","20%"),r(l,"type","text"),r(l,"name","exercise_notes"),r(l,"placeholder","Notes, i.e. how you felt or something for next time"),r(l,"class","training_input svelte-1krqaef"),r(l,"width","30%"),r(T,"type","button"),T.value="add",r(T,"class","training_input submit_button svelte-1krqaef"),r(d,"id","trainingGrid"),r(d,"action","?/addexercise"),r(d,"method","POST"),r(_,"class","exerciseandload"),r(K,"id","datagrid"),r(K,"class","ag-theme-alpine"),L(K,"height","70vh"),L(K,"width","100%"),L(V,"display","flex"),L(V,"justify-content","center"),L(V,"align-items","center")},m(n,v){k&&k.m(n,v),q(n,e,v),q(n,t,v),o(t,a),o(a,s),q(n,u,v),q(n,m,v);for(let E=0;E<$.length;E+=1)$[E].m(m,null);q(n,p,v),q(n,_,v),o(_,S),le(y,S,null),o(_,b),o(_,d),o(d,R),o(d,x),o(d,G),o(d,B),o(d,j),o(d,Q),o(d,f),o(d,N),o(d,P),o(d,A),o(d,U),o(d,H),o(d,l),o(d,F),o(d,T),q(n,z,v),q(n,V,v),o(V,K),i[15](K),q(n,ne,v),D&&D.m(n,v),q(n,W,v),X=!0,ce||(me=[Z(a,"click",i[12]),Z(T,"click",i[9])],ce=!0)},p(n,[v]){if(n[2]?k?v&4&&M(k,1):(k=De(),k.c(),M(k,1),k.m(e.parentNode,e)):k&&(fe(),J(k,1,1,()=>{k=null}),de()),v&2049){Y=n[0].trainingProgamDays.training_days;let E;for(E=0;E<Y.length;E+=1){const ee=ve(n,Y,E);$[E]?$[E].p(ee,v):($[E]=be(ee),$[E].c(),$[E].m(m,null))}for(;E<$.length;E+=1)$[E].d(1);$.length=Y.length}(!X||v&16)&&(R.value=n[4]),(!X||v&32)&&(G.value=n[5]),n[3]?D?(D.p(n,v),v&8&&M(D,1)):(D=ke(n),D.c(),M(D,1),D.m(W.parentNode,W)):D&&(fe(),J(D,1,1,()=>{D=null}),de())},i(n){X||(M(k),M(y.$$.fragment,n),M(D),X=!0)},o(n){J(k),J(y.$$.fragment,n),J(D),X=!1},d(n){k&&k.d(n),n&&c(e),n&&c(t),n&&c(u),n&&c(m),Ne($,n),n&&c(p),n&&c(_),oe(y),n&&c(z),n&&c(V),i[15](null),n&&c(ne),D&&D.d(n),n&&c(W),ce=!1,Te(me)}}}async function je(i,e){const t=parseInt(e.protein_grams),a=parseInt(e.carbs_grams),s=parseInt(e.fat_grams),u=t*4+a*4+s*9;e.kkcals=u,i.setDataValue("kkcals",e.kkcals);const m=JSON.stringify(e);if(!(await fetch("/reference/updaterecord",{method:"POST",headers:{"Content-Type":"application/json"},body:m})).ok)throw Error(json.message)}function Ae(i,e,t){let{data:a}=e;var s,u,m=!0;let p=!1,_=0,S="";var y=[],b=[];const d=new Date,R=d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2);let x=a.exerciseReferences;x.some(l=>l.exercise_name.indexOf("cmd")>0)||x.push({user_id:0,exercise_name:"ðŸ’ª /cmd Count KCals for the Day",exercise_id:0});const G=l=>l.exercise_name;let B={columnDefs:y,rowData:b,onCellValueChanged(l){je(l.node,l.data)},rowEditable:!0,onGridReady:l=>{l.api.setRowData(b)}};const j=l=>{t(2,m=!0);const F=document.getElementById("exerciseautocomplete").value;document.forms.trainingGrid.elements.exercise_name.value=F,document.forms.trainingGrid.submit()},Q=l=>{l.key=="Enter"},f=(l,F)=>{var T=document.getElementsByClassName("trainingdaytab");t(4,_=F),t(5,S=l);for(var z=0;z<T.length;z++)T[z].textContent==l?(T[z].style.backgroundColor="#007aff",a.trainingProgamDays.training_days.forEach(V=>{V.day_description==l&&(b=V.training_grid,U(),B.api.setColumnDefs(y),B.api.setRowData(b))})):T[z].style.backgroundColor="#FF3E00"};$e(()=>{if(a.trainingProgamDays!=null){var l=a.trainingProgamDays.training_days;l!=null&&a.trainingProgamDays.training_days.length>0&&(b=a.trainingProgamDays.training_days[0].training_grid,U())}u=new Ve(s,B),a.trainingProgamDays!=null&&(a.selectedDayId==""&&a.trainingProgamDays.training_days.length>0?f(a.trainingProgamDays.training_days[0].day_description,a.trainingProgamDays.training_days[0].id):f(a.selectedDayDescription,a.selectedDayId)),t(2,m=!1)}),Oe(()=>{u&&u.destroy()});function N(){t(3,p=!0)}function P(l){t(3,p=!1)}function A(){t(3,p=!1)}function U(){b!=null&&(y=[],b.forEach(l=>{for(const F in l)if(l.hasOwnProperty(F)){const T={field:F,headerName:F,editable:!0,minWidth:70,width:125};y.some(V=>V.field===F)||y.push(T)}}))}function H(l){Ue[l?"unshift":"push"](()=>{s=l,t(1,s)})}return i.$$set=l=>{"data"in l&&t(0,a=l.data)},[a,s,m,p,_,S,R,x,G,j,Q,f,N,P,A,H]}class Qe extends Ee{constructor(e){super(),we(this,e,Ae,Be,Pe,{data:0})}}export{Qe as component};
