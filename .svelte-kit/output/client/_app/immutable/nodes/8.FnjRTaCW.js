import{s as ve,e as p,t as ce,a as W,c as v,b as N,d as me,f as i,g as R,l as Z,q as s,i as j,h as c,G as he,A as Y,r as _e,H as Le,u as P,n as ge,m as Ee,x as Ae,y as Me,z as Ie}from"../chunks/scheduler.D5qmQzhB.js";import{S as be,i as ye,t as M,g as ie,a as U,c as fe,b as ae,d as le,m as se,e as ne}from"../chunks/index.eUYc991i.js";import"../chunks/index.61jbim_M.js";import"../chunks/stores.N89_U9GC.js";import{G as Se}from"../chunks/ag-theme-alpine.3A7TJ96k.js";import{T as $e}from"../chunks/Typeahead.U1aXNshX.js";/* empty css                                                      */import{C as Te}from"../chunks/Chasing.mmy04f5_.js";function Fe(a){let e,o,t;return o=new Te({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=p("div"),ae(o.$$.fragment),this.h()},l(l){e=v(l,"DIV",{style:!0});var r=N(e);le(o.$$.fragment,r),r.forEach(i),this.h()},h(){P(e,"display","flex"),P(e,"justify-content","center"),P(e,"padding","10px")},m(l,r){j(l,e,r),se(o,e,null),t=!0},i(l){t||(M(o.$$.fragment,l),t=!0)},o(l){U(o.$$.fragment,l),t=!1},d(l){l&&i(e),ne(o)}}}function Ne(a){let e,o;return{c(){e=p("textarea"),this.h()},l(t){e=v(t,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),N(e).forEach(i),this.h()},h(){s(e,"name","receiverecipe"),s(e,"rows","10"),s(e,"cols","50"),e.value=o=a[7](a[0])+`
				`,s(e,"class","svelte-1en67h7")},m(t,l){j(t,e,l)},p(t,l){l&1&&o!==(o=t[7](t[0])+`
				`)&&(e.value=o)},d(t){t&&i(e)}}}function Ve(a){let e,o,t,l,r,m,n,f,T,C,_,E,b,$="Save to Food Log",y,D;return{c(){e=p("input"),o=W(),t=p("input"),l=W(),r=p("input"),m=W(),n=p("input"),f=W(),T=p("input"),C=W(),_=p("input"),E=W(),b=p("button"),b.textContent=$,this.h()},l(g){e=v(g,"INPUT",{type:!0,name:!0}),o=R(g),t=v(g,"INPUT",{type:!0,name:!0}),l=R(g),r=v(g,"INPUT",{type:!0,name:!0}),m=R(g),n=v(g,"INPUT",{type:!0,name:!0}),f=R(g),T=v(g,"INPUT",{type:!0,name:!0}),C=R(g),_=v(g,"INPUT",{type:!0,name:!0}),E=R(g),b=v(g,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(b)!=="svelte-13xjqwh"&&(b.textContent=$),this.h()},h(){s(e,"type","hidden"),s(e,"name","food"),e.value=a[8]().food_name,s(t,"type","hidden"),s(t,"name","food_qty"),t.value="1",s(r,"type","hidden"),s(r,"name","fat_grams"),r.value=a[8]().total_fat_grams,s(n,"type","hidden"),s(n,"name","carbs_grams"),n.value=a[8]().total_carbs_grams,s(T,"type","hidden"),s(T,"name","protein_grams"),T.value=a[8]().total_protein_grams,s(_,"type","hidden"),s(_,"name","total_kkcals"),_.value=a[8]().total_kkcals,s(b,"class","svelte-1en67h7")},m(g,u){j(g,e,u),j(g,o,u),j(g,t,u),j(g,l,u),j(g,r,u),j(g,m,u),j(g,n,u),j(g,f,u),j(g,T,u),j(g,C,u),j(g,_,u),j(g,E,u),j(g,b,u),y||(D=Y(b,"click",a[4]),y=!0)},p:ge,d(g){g&&(i(e),i(o),i(t),i(l),i(r),i(m),i(n),i(f),i(T),i(C),i(_),i(E),i(b)),y=!1,D()}}}function Ke(a){let e,o,t,l,r,m,n,f,T,C,_,E,b,$="Generate Recipe",y,D,g="Cancel",u,I,O,h=a[1]&&Fe(),S=a[0]!==""&&Ne(a),V=a[0]!==""&&Ve(a);return{c(){e=p("div"),o=p("div"),t=p("h2"),l=ce(a[3]),r=W(),h&&h.c(),m=W(),n=p("form"),f=p("textarea"),T=W(),S&&S.c(),C=W(),_=p("div"),V&&V.c(),E=W(),b=p("button"),b.textContent=$,y=W(),D=p("button"),D.textContent=g,this.h()},l(z){e=v(z,"DIV",{class:!0});var A=N(e);o=v(A,"DIV",{class:!0});var H=N(o);t=v(H,"H2",{});var q=N(t);l=me(q,a[3]),q.forEach(i),r=R(H),h&&h.l(H),m=R(H),n=v(H,"FORM",{name:!0,action:!0,method:!0});var K=N(n);f=v(K,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),N(f).forEach(i),T=R(K),S&&S.l(K),C=R(K),_=v(K,"DIV",{class:!0});var G=N(_);V&&V.l(G),E=R(G),b=v(G,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(b)!=="svelte-c91m11"&&(b.textContent=$),y=R(G),D=v(G,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(D)!=="svelte-qt21o4"&&(D.textContent=g),G.forEach(i),K.forEach(i),H.forEach(i),A.forEach(i),this.h()},h(){s(f,"name","askforrecipe"),s(f,"rows","10"),s(f,"cols","50"),s(f,"class","svelte-1en67h7"),s(b,"class","svelte-1en67h7"),s(D,"class","svelte-1en67h7"),s(_,"class","buttons svelte-1en67h7"),s(n,"name","macrosgenie"),s(n,"action","?/addsuggestedfood"),s(n,"method","POST"),s(o,"class","content svelte-1en67h7"),s(e,"class","modal svelte-1en67h7")},m(z,A){j(z,e,A),c(e,o),c(o,t),c(t,l),c(o,r),h&&h.m(o,null),c(o,m),c(o,n),c(n,f),he(f,a[2]),c(n,T),S&&S.m(n,null),c(n,C),c(n,_),V&&V.m(_,null),c(_,E),c(_,b),c(_,y),c(_,D),u=!0,I||(O=[Y(f,"input",a[10]),Y(b,"click",a[6]),Y(D,"click",a[5])],I=!0)},p(z,[A]){z[1]?h?A&2&&M(h,1):(h=Fe(),h.c(),M(h,1),h.m(o,m)):h&&(ie(),U(h,1,1,()=>{h=null}),fe()),A&4&&he(f,z[2]),z[0]!==""?S?S.p(z,A):(S=Ne(z),S.c(),S.m(n,C)):S&&(S.d(1),S=null),z[0]!==""?V?V.p(z,A):(V=Ve(z),V.c(),V.m(_,E)):V&&(V.d(1),V=null)},i(z){u||(M(h),u=!0)},o(z){U(h),u=!1},d(z){z&&i(e),h&&h.d(),S&&S.d(),V&&V.d(),I=!1,_e(O)}}}function He(a,e,o){let{totalsData:t}=e;const l=Le();let r="";var m=!1;let n="Modify the text below (or leave as is) to generate food ideas",f=`Please suggest a vegetarian recipe to fit the following macros. 

Fat: `+t[2].fat_grams+" grams, Carbs: "+t[2].carbs_grams+` grams, 
Protein: `+t[2].protein_grams+" grams. Feel free to mix and match ingredients.";function T(){o(1,m=!0),document.forms.macrosgenie.submit(),l("save",f)}function C(){l("cancel")}async function _(y){o(1,m=!0),y.preventDefault();const g=JSON.stringify({food_for_macros:f}),u=await fetch("/foodlog/[date]/generatefoodsuggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:g}),I=await u.json();u.ok||console.log(I),o(0,r=I.generated_food),o(1,m=!1)}function E(){var y="",D=JSON.parse(r);return y=D.food_name+`
`+D.food_description+`

`+D.food_recipe+`
`,y+=`

Fat: `+D.total_fat_grams+" grams, Carbs: "+D.total_carbs_grams+" grams, Protein: "+D.total_protein_grams+" grams.",y}function b(){return JSON.parse(r)}function $(){f=this.value,o(2,f)}return a.$$set=y=>{"totalsData"in y&&o(9,t=y.totalsData)},[r,m,f,n,T,C,_,E,b,t,$]}class Ue extends be{constructor(e){super(),ye(this,e,He,Ke,ve,{totalsData:9})}}function ze(a){let e,o,t;return o=new Te({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=p("div"),ae(o.$$.fragment),this.h()},l(l){e=v(l,"DIV",{style:!0});var r=N(e);le(o.$$.fragment,r),r.forEach(i),this.h()},h(){P(e,"display","flex"),P(e,"justify-content","center"),P(e,"padding","10px")},m(l,r){j(l,e,r),se(o,e,null),t=!0},i(l){t||(M(o.$$.fragment,l),t=!0)},o(l){U(o.$$.fragment,l),t=!1},d(l){l&&i(e),ne(o)}}}function Oe(a){let e,o;return{c(){e=p("textarea"),this.h()},l(t){e=v(t,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),N(e).forEach(i),this.h()},h(){s(e,"name","receiverecipe"),s(e,"rows","10"),s(e,"cols","50"),e.value=o=a[6](a[0])+`
				`,s(e,"class","svelte-1en67h7")},m(t,l){j(t,e,l)},p(t,l){l&1&&o!==(o=t[6](t[0])+`
				`)&&(e.value=o)},d(t){t&&i(e)}}}function Pe(a){let e,o="Add to today's food log",t,l,r="Re-veganize",m,n;return{c(){e=p("button"),e.textContent=o,t=W(),l=p("button"),l.textContent=r,this.h()},l(f){e=v(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-21wo6w"&&(e.textContent=o),t=R(f),l=v(f,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(l)!=="svelte-1yucity"&&(l.textContent=r),this.h()},h(){s(e,"class","svelte-1en67h7"),s(l,"class","svelte-1en67h7")},m(f,T){j(f,e,T),j(f,t,T),j(f,l,T),m||(n=[Y(e,"click",a[5]),Y(l,"click",a[5])],m=!0)},p:ge,d(f){f&&(i(e),i(t),i(l)),m=!1,_e(n)}}}function qe(a){let e,o,t,l,r,m,n,f,T,C,_,E,b,$="Cancel",y,D,g,u=a[1]&&ze(),I=a[0]!==""&&Oe(a),O=a[0]!==""&&Pe(a);return{c(){e=p("div"),o=p("div"),t=p("h2"),l=ce(a[3]),r=W(),u&&u.c(),m=W(),n=p("form"),f=p("textarea"),T=W(),I&&I.c(),C=W(),_=p("div"),O&&O.c(),E=W(),b=p("button"),b.textContent=$,this.h()},l(h){e=v(h,"DIV",{class:!0});var S=N(e);o=v(S,"DIV",{class:!0});var V=N(o);t=v(V,"H2",{});var z=N(t);l=me(z,a[3]),z.forEach(i),r=R(V),u&&u.l(V),m=R(V),n=v(V,"FORM",{name:!0,action:!0,method:!0});var A=N(n);f=v(A,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),N(f).forEach(i),T=R(A),I&&I.l(A),C=R(A),_=v(A,"DIV",{class:!0});var H=N(_);O&&O.l(H),E=R(H),b=v(H,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(b)!=="svelte-qt21o4"&&(b.textContent=$),H.forEach(i),A.forEach(i),V.forEach(i),S.forEach(i),this.h()},h(){s(f,"name","veganizethis"),s(f,"rows","10"),s(f,"cols","50"),s(f,"class","svelte-1en67h7"),s(b,"class","svelte-1en67h7"),s(_,"class","buttons svelte-1en67h7"),s(n,"name","veganizer"),s(n,"action","?/addsuggestedfood"),s(n,"method","POST"),s(o,"class","content svelte-1en67h7"),s(e,"class","modal svelte-1en67h7")},m(h,S){j(h,e,S),c(e,o),c(o,t),c(t,l),c(o,r),u&&u.m(o,null),c(o,m),c(o,n),c(n,f),he(f,a[2]),c(n,T),I&&I.m(n,null),c(n,C),c(n,_),O&&O.m(_,null),c(_,E),c(_,b),y=!0,D||(g=[Y(f,"input",a[8]),Y(b,"click",a[4])],D=!0)},p(h,[S]){h[1]?u?S&2&&M(u,1):(u=ze(),u.c(),M(u,1),u.m(o,m)):u&&(ie(),U(u,1,1,()=>{u=null}),fe()),S&4&&he(f,h[2]),h[0]!==""?I?I.p(h,S):(I=Oe(h),I.c(),I.m(n,C)):I&&(I.d(1),I=null),h[0]!==""?O?O.p(h,S):(O=Pe(h),O.c(),O.m(_,E)):O&&(O.d(1),O=null)},i(h){y||(M(u),y=!0)},o(h){U(u),y=!1},d(h){h&&i(e),u&&u.d(),I&&I.d(),O&&O.d(),D=!1,_e(g)}}}function Ge(a,e,o){let{foodLog:t}=e;const l=Le();let r="";var m=!1;let n="Here's how you can veganize your daily foods, click Re-veganize button to get more ideas",f=t.map(y=>y.food_name+", Fat: "+y.fat_grams+" grams, Carbs: "+y.carbs_grams+" grams, Protein: "+y.protein_grams+" grams.").join(`
`),T=`Veganizing these foods: 

`+f;function C(){l("cancel")}async function _(y){y.preventDefault(),await E()}async function E(){o(1,m=!0);const D=JSON.stringify({veganize_this_food:f}),g=await fetch("/foodlog/[date]/veganizefood",{method:"POST",headers:{"Content-Type":"application/json"},body:D}),u=await g.json();g.ok||console.log(u),o(0,r=u.generated_food),o(1,m=!1)}function b(){return r}E();function $(){T=this.value,o(2,T)}return a.$$set=y=>{"foodLog"in y&&o(7,t=y.foodLog)},[r,m,T,n,C,_,b,t,$]}class Be extends be{constructor(e){super(),ye(this,e,Ge,qe,ve,{foodLog:7})}}function je(a){let e,o,t;return o=new Te({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=p("div"),ae(o.$$.fragment),this.h()},l(l){e=v(l,"DIV",{style:!0});var r=N(e);le(o.$$.fragment,r),r.forEach(i),this.h()},h(){P(e,"display","flex"),P(e,"justify-content","center"),P(e,"padding","10px")},m(l,r){j(l,e,r),se(o,e,null),t=!0},i(l){t||(M(o.$$.fragment,l),t=!0)},o(l){U(o.$$.fragment,l),t=!1},d(l){l&&i(e),ne(o)}}}function We(a){let e,o;return e=new Ue({props:{totalsData:a[16]}}),e.$on("save",a[11]),e.$on("cancel",a[12]),{c(){ae(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){se(e,t,l),o=!0},p:ge,i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){U(e.$$.fragment,t),o=!1},d(t){ne(e,t)}}}function Re(a){let e,o;return e=new Be({props:{foodLog:a[5]}}),e.$on("save",a[13]),e.$on("cancel",a[14]),{c(){ae(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){se(e,t,l),o=!0},p:ge,i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){U(e.$$.fragment,t),o=!1},d(t){ne(e,t)}}}function Je(a){let e,o,t,l,r,m,n,f='<input type="hidden" name="food"/>',T,C,_,E,b,$,y,D,g,u,I,O,h,S,V,z,A="",H,q,K,G,J,B,ee,X,Q,te;r=new $e({props:{id:"foodautocomplete",name:"foodautocomplete",autofocus:!0,hideLabel:!0,focusAfterSelect:!0,placeholder:"Whatcha eatin'?",data:a[9],extract:a[10]}}),r.$on("keydown",a[15]);let d=a[1]&&je(),w=a[3]&&We(a),L=a[4]&&Re(a);return{c(){e=p("link"),o=W(),t=p("div"),l=p("form"),ae(r.$$.fragment),m=W(),n=p("form"),n.innerHTML=f,T=W(),C=p("div"),_=p("div"),E=p("a"),b=p("i"),$=W(),y=p("div"),D=ce("Food Log for "),g=ce(a[6]),u=W(),I=p("div"),O=p("a"),h=p("i"),S=W(),d&&d.c(),V=W(),z=p("div"),z.innerHTML=A,H=W(),q=p("div"),K=p("div"),G=W(),J=p("div"),B=p("div"),ee=W(),w&&w.c(),X=W(),L&&L.c(),Q=Ee(),this.h()},l(k){e=v(k,"LINK",{rel:!0,href:!0}),o=R(k),t=v(k,"DIV",{style:!0});var F=N(t);l=v(F,"FORM",{action:!0,method:!0});var de=N(l);le(r.$$.fragment,de),de.forEach(i),m=R(F),n=v(F,"FORM",{id:!0,action:!0,method:!0,"data-svelte-h":!0}),Z(n)!=="svelte-48b3vv"&&(n.innerHTML=f),T=R(F),C=v(F,"DIV",{class:!0});var x=N(C);_=v(x,"DIV",{class:!0});var ue=N(_);E=v(ue,"A",{"data-sveltekit-reload":!0,href:!0});var re=N(E);b=v(re,"I",{class:!0,style:!0}),N(b).forEach(i),re.forEach(i),ue.forEach(i),$=R(x),y=v(x,"DIV",{class:!0});var oe=N(y);D=me(oe,"Food Log for "),g=me(oe,a[6]),oe.forEach(i),u=R(x),I=v(x,"DIV",{class:!0});var Ce=N(I);O=v(Ce,"A",{"data-sveltekit-reload":!0,href:!0});var we=N(O);h=v(we,"I",{class:!0,style:!0}),N(h).forEach(i),we.forEach(i),Ce.forEach(i),x.forEach(i),S=R(F),d&&d.l(F),V=R(F),z=v(F,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),Z(z)!=="svelte-oss8rm"&&(z.innerHTML=A),H=R(F),q=v(F,"DIV",{style:!0});var ke=N(q);K=v(ke,"DIV",{id:!0,class:!0,style:!0}),N(K).forEach(i),ke.forEach(i),G=R(F),J=v(F,"DIV",{style:!0});var De=N(J);B=v(De,"DIV",{id:!0,class:!0,style:!0}),N(B).forEach(i),De.forEach(i),F.forEach(i),ee=R(k),w&&w.l(k),X=R(k),L&&L.l(k),Q=Ee(),this.h()},h(){s(e,"rel","stylesheet"),s(e,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),s(l,"action","?/addfood"),s(l,"method","POST"),s(n,"id","foodForm"),s(n,"action","?/addfood"),s(n,"method","POST"),s(b,"class","fa fa-arrow-circle-left"),P(b,"font-size","36px"),P(b,"color","blue"),P(b,"padding","10px"),s(E,"data-sveltekit-reload",""),s(E,"href","/foodlog/"+a[8]),s(_,"class","left-image"),s(y,"class","foodheader"),s(h,"class","fa fa-arrow-circle-right"),P(h,"font-size","36px"),P(h,"color","blue"),P(h,"padding","10px"),s(O,"data-sveltekit-reload",""),s(O,"href","/foodlog/"+a[7]),s(I,"class","right-image"),s(C,"class","container"),s(z,"class","grid"),s(z,"id","foodLog"),s(K,"id","totals"),s(K,"class","ag-theme-alpine"),P(K,"height","22vh"),P(K,"width","100%"),P(q,"display","flex"),P(q,"justify-content","center"),P(q,"align-items","center"),s(B,"id","datagrid"),s(B,"class","ag-theme-alpine"),P(B,"height","170vh"),P(B,"width","100%"),P(J,"display","flex"),P(J,"justify-content","center"),P(J,"align-items","center"),P(t,"text-align","center"),P(t,"margin","25px auto"),P(t,"width","85%"),P(t,"max-width","1200px")},m(k,F){j(k,e,F),j(k,o,F),j(k,t,F),c(t,l),se(r,l,null),c(t,m),c(t,n),c(t,T),c(t,C),c(C,_),c(_,E),c(E,b),c(C,$),c(C,y),c(y,D),c(y,g),c(C,u),c(C,I),c(I,O),c(O,h),c(t,S),d&&d.m(t,null),c(t,V),c(t,z),c(t,H),c(t,q),c(q,K),a[18](K),c(t,G),c(t,J),c(J,B),a[19](B),j(k,ee,F),w&&w.m(k,F),j(k,X,F),L&&L.m(k,F),j(k,Q,F),te=!0},p(k,F){k[1]?d?F[0]&2&&M(d,1):(d=je(),d.c(),M(d,1),d.m(t,V)):d&&(ie(),U(d,1,1,()=>{d=null}),fe()),k[3]?w?(w.p(k,F),F[0]&8&&M(w,1)):(w=We(k),w.c(),M(w,1),w.m(X.parentNode,X)):w&&(ie(),U(w,1,1,()=>{w=null}),fe()),k[4]?L?(L.p(k,F),F[0]&16&&M(L,1)):(L=Re(k),L.c(),M(L,1),L.m(Q.parentNode,Q)):L&&(ie(),U(L,1,1,()=>{L=null}),fe())},i(k){te||(M(r.$$.fragment,k),M(d),M(w),M(L),te=!0)},o(k){U(r.$$.fragment,k),U(d),U(w),U(L),te=!1},d(k){k&&(i(e),i(o),i(t),i(ee),i(X),i(Q)),ne(r),d&&d.d(),a[18](null),a[19](null),w&&w.d(k),L&&L.d(k)}}}function pe(a){return a.data.label==="Target Totals"}function Xe(a){for(var e=document.getElementById("foodLog").offsetWidth,o=[],t=[],l=0,r=a.columnApi.getColumns(),m=0;m<r.length;m++){let n=r[m];if(l+=n.getMinWidth(),l>e){o.push("Food"),o.push("Fat"),o.push("Carbs"),o.push("Protein"),t.push("Qty"),t.push("Kcals"),a.columnApi.setColumnsVisible(o,!0),a.columnApi.setColumnsVisible(t,!1),a.api.sizeColumnsToFit();break}}a.api.sizeColumnsToFit()}function Qe(a){for(var e=document.getElementById("totals").offsetWidth,o=[],t=[],l=0,r=a.columnApi.getColumns(),m=0;m<r.length;m++){let n=r[m];if(l+=n.getMinWidth(),l>e){o.push("Totals"),o.push("Fat"),o.push("Carbs"),o.push("Protein"),t.push("Empty"),t.push("Kcals"),a.columnApi.setColumnsVisible(o,!0),a.columnApi.setColumnsVisible(t,!1),a.api.sizeColumnsToFit();break}}a.api.sizeColumnsToFit()}async function xe(a,e){const o=parseInt(e.protein_grams),t=parseInt(e.carbs_grams),l=parseInt(e.fat_grams),r=o*4+t*4+l*9;e.Kcals=r,a.setDataValue("Kcals",e.Kcals);const m=JSON.stringify(e),n=await fetch("/foodlog/[date]/updaterecord",{method:"POST",headers:{"Content-Type":"application/json"},body:m}),f=await n.json();return n.ok||console.log(f),f}function Ye(a,e,o){let{data:t}=e;var l,r,m=!0,n,f;let T=!1,C=!1;const _=t.rowData,E=t.today,b=new Date(E).toISOString().split("T")[0];var $=new Date(E);$.setDate($.getDate()+1);const y=$.toISOString().split("T")[0];var D=new Date(E);D.setDate(D.getDate()-1);const g=D.toISOString().split("T")[0];let u=t.foodReferences;u.some(d=>d.food_name.indexOf("cmd")>0)||u.push({user_id:0,food_name:"💪 /cmd Suggest some food to fit my macros",food_id:0},{user_id:0,food_name:"💪 /cmd Veganize this: suggest how to convert non-vegan foods for the day to vegan (and log them)",food_id:0});const I=d=>d.food_name;function O(){o(3,T=!0)}function h(){o(3,T=!1),o(1,m=!0)}function S(){o(3,T=!1)}function V(){console.log("showVeganizeThis"),o(4,C=!0)}function z(){o(4,C=!1),o(1,m=!0)}function A(){o(4,C=!1)}t.targetTotals,t.calculatedTotals,t.differenceTotals;const H=d=>{if(d.key=="Enter"){const w=document.getElementById("foodautocomplete").value;w.includes("/cmd Suggest some food to fit my macros")?(console.log("suggest stuff"),O()):w.includes("/cmd Veganize this")?(console.log("veganize this"),V()):(document.forms.foodForm.elements.food.value=w,document.forms.foodForm.submit(),o(1,m=!0))}};let q=[{headerName:"Food",field:"food_name",editable:!0,colId:"Food",minWidth:100,align:"left"},{headerName:"Qty",field:"food_qty",editable:!0,colId:"Qty",minWidth:100},{headerName:"Fat, g",field:"fat_grams",editable:!0,colId:"Fat",minWidth:70},{headerName:"Carbs, g",field:"carbs_grams",editable:!0,colId:"Carbs",minWidth:70},{headerName:"Protein, g",field:"protein_grams",editable:!0,colId:"Protein",minWidth:70},{headerName:"Kcals",field:"kkcals",colId:"Kcals",minWidth:120}],K=[{headerName:"Totals",field:"label",editable:!1,colId:"Totals",minWidth:100,cellStyle:d=>d.value==="Target Totals"?{color:"white",backgroundColor:"lightblue"}:d.value==="Difference"?{color:"white",backgroundColor:"red"}:{color:"white",backgroundColor:"grey"}},{headerName:"",field:"",editable:!1,colId:"Empty",minWidth:100},{headerName:"Fat, g",field:"fat_grams",editable:d=>pe(d),colId:"Fat",minWidth:70},{headerName:"Carbs, g",field:"carbs_grams",editable:d=>pe(d),colId:"Carbs",minWidth:70},{headerName:"Protein, g",field:"protein_grams",editable:d=>pe(d),colId:"Protein",minWidth:70},{headerName:"Kcals",field:"kcals",editable:!1,colId:"Kcals",minWidth:120}],G=[t.targetTotals,t.calculatedTotals,t.differenceTotals];function J(d){if(d.keyCode===46){const w=B.api.getSelectedRows();B.api.applyTransaction({remove:w})}}let B={columnDefs:q,rowData:t.rowData,rowSelection:"single",onGridReady:d=>{document.addEventListener("keydown",J)},onCellValueChanged(d){d.colDef.colId!=="Kcals"&&xe(d.node,d.data)},onGridSizeChanged:Xe},ee={columnDefs:K,rowData:G,onCellValueChanged(d){X(d.node,d.data,d.column.colId)},onGridSizeChanged:Qe};async function X(d,w,L){if(L==="Kcals")return;const k=parseInt(w.protein_grams),F=parseInt(w.carbs_grams),de=parseInt(w.fat_grams),x=k*4+F*4+de*9;w.Kcals=x,w.feeding_date=E,d.setDataValue("Kcals",w.Kcals,{suppressCellChangedEvent:!0});const ue=JSON.stringify(w),re=await fetch("/foodlog/[date]/updatetargettotals",{method:"POST",headers:{"Content-Type":"application/json"},body:ue}),oe=await re.json();return re.ok||console.log(oe),oe}Ae(()=>{r=new Se(l,B),f=new Se(n,ee),o(1,m=!1)}),Me(()=>{r&&r.destroy(),f&&f.destroy()});function Q(d){Ie[d?"unshift":"push"](()=>{n=d,o(2,n)})}function te(d){Ie[d?"unshift":"push"](()=>{l=d,o(0,l)})}return a.$$set=d=>{"data"in d&&o(17,t=d.data)},[l,m,n,T,C,_,b,y,g,u,I,h,S,z,A,H,G,t,Q,te]}class rt extends be{constructor(e){super(),ye(this,e,Ye,Je,ve,{data:17},null,[-1,-1])}}export{rt as component};
