import{S as pe,b as ve,s as _e,e as p,t as X,c as j,d as v,f as E,g as Q,h as n,j as R,q as l,k as P,l as d,L as me,B as ee,C as K,J as ie,D as B,E as fe,r as be,M as We,F as ae,G as se,u as O,H as le,I as ne,n as he,w as De,y as Le,z as Me,A as Ie}from"../../../../chunks/index-6c37bd0f.js";import"../../../../chunks/index-2ad4ec3f.js";import"../../../../chunks/stores-26147f28.js";import{G as Ce}from"../../../../chunks/ag-theme-alpine-28590e6d.js";import{T as $e}from"../../../../chunks/Typeahead-e84e1fed.js";/* empty css                                                               */import{C as ye}from"../../../../chunks/Chasing-398c09c4.js";function Fe(a){let e,o,t;return o=new ye({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=p("div"),ae(o.$$.fragment),this.h()},l(s){e=v(s,"DIV",{style:!0});var r=E(e);se(o.$$.fragment,r),r.forEach(n),this.h()},h(){O(e,"display","flex"),O(e,"justify-content","center"),O(e,"padding","10px")},m(s,r){P(s,e,r),le(o,e,null),t=!0},i(s){t||(K(o.$$.fragment,s),t=!0)},o(s){B(o.$$.fragment,s),t=!1},d(s){s&&n(e),ne(o)}}}function Se(a){let e,o;return{c(){e=p("textarea"),this.h()},l(t){e=v(t,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),E(e).forEach(n),this.h()},h(){l(e,"name","receiverecipe"),l(e,"rows","10"),l(e,"cols","50"),e.value=o=a[7](a[0])+`
				`,l(e,"class","svelte-1en67h7")},m(t,s){P(t,e,s)},p(t,s){s&1&&o!==(o=t[7](t[0])+`
				`)&&(e.value=o)},d(t){t&&n(e)}}}function Ne(a){let e,o,t,s,r,h,i,f,w,k,_,I,y,A,b,C;return{c(){e=p("input"),o=j(),t=p("input"),s=j(),r=p("input"),h=j(),i=p("input"),f=j(),w=p("input"),k=j(),_=p("input"),I=j(),y=p("button"),A=X("Save to Food Log"),this.h()},l(u){e=v(u,"INPUT",{type:!0,name:!0}),o=R(u),t=v(u,"INPUT",{type:!0,name:!0}),s=R(u),r=v(u,"INPUT",{type:!0,name:!0}),h=R(u),i=v(u,"INPUT",{type:!0,name:!0}),f=R(u),w=v(u,"INPUT",{type:!0,name:!0}),k=R(u),_=v(u,"INPUT",{type:!0,name:!0}),I=R(u),y=v(u,"BUTTON",{class:!0});var m=E(y);A=Q(m,"Save to Food Log"),m.forEach(n),this.h()},h(){l(e,"type","hidden"),l(e,"name","food"),e.value=a[8]().food_name,l(t,"type","hidden"),l(t,"name","food_qty"),t.value="1",l(r,"type","hidden"),l(r,"name","fat_grams"),r.value=a[8]().total_fat_grams,l(i,"type","hidden"),l(i,"name","carbs_grams"),i.value=a[8]().total_carbs_grams,l(w,"type","hidden"),l(w,"name","protein_grams"),w.value=a[8]().total_protein_grams,l(_,"type","hidden"),l(_,"name","total_kkcals"),_.value=a[8]().total_kkcals,l(y,"class","svelte-1en67h7")},m(u,m){P(u,e,m),P(u,o,m),P(u,t,m),P(u,s,m),P(u,r,m),P(u,h,m),P(u,i,m),P(u,f,m),P(u,w,m),P(u,k,m),P(u,_,m),P(u,I,m),P(u,y,m),d(y,A),b||(C=ee(y,"click",a[4]),b=!0)},p:he,d(u){u&&n(e),u&&n(o),u&&n(t),u&&n(s),u&&n(r),u&&n(h),u&&n(i),u&&n(f),u&&n(w),u&&n(k),u&&n(_),u&&n(I),u&&n(y),b=!1,C()}}}function Ke(a){let e,o,t,s,r,h,i,f,w,k,_,I,y,A,b,C,u,m,F,z,g=a[1]&&Fe(),S=a[0]!==""&&Se(a),V=a[0]!==""&&Ne(a);return{c(){e=p("div"),o=p("div"),t=p("h2"),s=X(a[3]),r=j(),g&&g.c(),h=j(),i=p("form"),f=p("textarea"),w=j(),S&&S.c(),k=j(),_=p("div"),V&&V.c(),I=j(),y=p("button"),A=X("Generate Recipe"),b=j(),C=p("button"),u=X("Cancel"),this.h()},l(W){e=v(W,"DIV",{class:!0});var L=E(e);o=v(L,"DIV",{class:!0});var M=E(o);t=v(M,"H2",{});var G=E(t);s=Q(G,a[3]),G.forEach(n),r=R(M),g&&g.l(M),h=R(M),i=v(M,"FORM",{name:!0,action:!0,method:!0});var q=E(i);f=v(q,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),E(f).forEach(n),w=R(q),S&&S.l(q),k=R(q),_=v(q,"DIV",{class:!0});var U=E(_);V&&V.l(U),I=R(U),y=v(U,"BUTTON",{class:!0});var J=E(y);A=Q(J,"Generate Recipe"),J.forEach(n),b=R(U),C=v(U,"BUTTON",{class:!0});var H=E(C);u=Q(H,"Cancel"),H.forEach(n),U.forEach(n),q.forEach(n),M.forEach(n),L.forEach(n),this.h()},h(){l(f,"name","askforrecipe"),l(f,"rows","10"),l(f,"cols","50"),l(f,"class","svelte-1en67h7"),l(y,"class","svelte-1en67h7"),l(C,"class","svelte-1en67h7"),l(_,"class","buttons svelte-1en67h7"),l(i,"name","macrosgenie"),l(i,"action","?/addsuggestedfood"),l(i,"method","POST"),l(o,"class","content svelte-1en67h7"),l(e,"class","modal svelte-1en67h7")},m(W,L){P(W,e,L),d(e,o),d(o,t),d(t,s),d(o,r),g&&g.m(o,null),d(o,h),d(o,i),d(i,f),me(f,a[2]),d(i,w),S&&S.m(i,null),d(i,k),d(i,_),V&&V.m(_,null),d(_,I),d(_,y),d(y,A),d(_,b),d(_,C),d(C,u),m=!0,F||(z=[ee(f,"input",a[10]),ee(y,"click",a[6]),ee(C,"click",a[5])],F=!0)},p(W,[L]){W[1]?g?L&2&&K(g,1):(g=Fe(),g.c(),K(g,1),g.m(o,h)):g&&(ie(),B(g,1,1,()=>{g=null}),fe()),L&4&&me(f,W[2]),W[0]!==""?S?S.p(W,L):(S=Se(W),S.c(),S.m(i,k)):S&&(S.d(1),S=null),W[0]!==""?V?V.p(W,L):(V=Ne(W),V.c(),V.m(_,I)):V&&(V.d(1),V=null)},i(W){m||(K(g),m=!0)},o(W){B(g),m=!1},d(W){W&&n(e),g&&g.d(),S&&S.d(),V&&V.d(),F=!1,be(z)}}}function Ue(a,e,o){let{totalsData:t}=e;const s=We();let r="";var h=!1;let i="Modify the text below (or leave as is) to generate food ideas",f=`Please suggest a vegetarian recipe to fit the following macros. 

Fat: `+t[2].fat_grams+" grams, Carbs: "+t[2].carbs_grams+` grams, 
Protein: `+t[2].protein_grams+" grams. Feel free to mix and match ingredients.";function w(){o(1,h=!0),document.forms.macrosgenie.submit(),s("save",f)}function k(){s("cancel")}async function _(b){o(1,h=!0),b.preventDefault();const u=JSON.stringify({food_for_macros:f}),m=await fetch("/foodlog/[date]/generatefoodsuggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:u}),F=await m.json();m.ok||console.log(F),o(0,r=F.generated_food),o(1,h=!1)}function I(){var b="",C=JSON.parse(r);return b=C.food_name+`
`+C.food_description+`

`+C.food_recipe+`
`,b+=`

Fat: `+C.total_fat_grams+" grams, Carbs: "+C.total_carbs_grams+" grams, Protein: "+C.total_protein_grams+" grams.",b}function y(){return JSON.parse(r)}function A(){f=this.value,o(2,f)}return a.$$set=b=>{"totalsData"in b&&o(9,t=b.totalsData)},[r,h,f,i,w,k,_,I,y,t,A]}class Ge extends pe{constructor(e){super(),ve(this,e,Ue,Ke,_e,{totalsData:9})}}function Ve(a){let e,o,t;return o=new ye({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=p("div"),ae(o.$$.fragment),this.h()},l(s){e=v(s,"DIV",{style:!0});var r=E(e);se(o.$$.fragment,r),r.forEach(n),this.h()},h(){O(e,"display","flex"),O(e,"justify-content","center"),O(e,"padding","10px")},m(s,r){P(s,e,r),le(o,e,null),t=!0},i(s){t||(K(o.$$.fragment,s),t=!0)},o(s){B(o.$$.fragment,s),t=!1},d(s){s&&n(e),ne(o)}}}function ze(a){let e,o;return{c(){e=p("textarea"),this.h()},l(t){e=v(t,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),E(e).forEach(n),this.h()},h(){l(e,"name","receiverecipe"),l(e,"rows","10"),l(e,"cols","50"),e.value=o=a[6](a[0])+`
				`,l(e,"class","svelte-1en67h7")},m(t,s){P(t,e,s)},p(t,s){s&1&&o!==(o=t[6](t[0])+`
				`)&&(e.value=o)},d(t){t&&n(e)}}}function Oe(a){let e,o,t,s,r,h,i;return{c(){e=p("button"),o=X("Add to today's food log"),t=j(),s=p("button"),r=X("Re-veganize"),this.h()},l(f){e=v(f,"BUTTON",{class:!0});var w=E(e);o=Q(w,"Add to today's food log"),w.forEach(n),t=R(f),s=v(f,"BUTTON",{class:!0});var k=E(s);r=Q(k,"Re-veganize"),k.forEach(n),this.h()},h(){l(e,"class","svelte-1en67h7"),l(s,"class","svelte-1en67h7")},m(f,w){P(f,e,w),d(e,o),P(f,t,w),P(f,s,w),d(s,r),h||(i=[ee(e,"click",a[5]),ee(s,"click",a[5])],h=!0)},p:he,d(f){f&&n(e),f&&n(t),f&&n(s),h=!1,be(i)}}}function Be(a){let e,o,t,s,r,h,i,f,w,k,_,I,y,A,b,C,u,m=a[1]&&Ve(),F=a[0]!==""&&ze(a),z=a[0]!==""&&Oe(a);return{c(){e=p("div"),o=p("div"),t=p("h2"),s=X(a[3]),r=j(),m&&m.c(),h=j(),i=p("form"),f=p("textarea"),w=j(),F&&F.c(),k=j(),_=p("div"),z&&z.c(),I=j(),y=p("button"),A=X("Cancel"),this.h()},l(g){e=v(g,"DIV",{class:!0});var S=E(e);o=v(S,"DIV",{class:!0});var V=E(o);t=v(V,"H2",{});var W=E(t);s=Q(W,a[3]),W.forEach(n),r=R(V),m&&m.l(V),h=R(V),i=v(V,"FORM",{name:!0,action:!0,method:!0});var L=E(i);f=v(L,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),E(f).forEach(n),w=R(L),F&&F.l(L),k=R(L),_=v(L,"DIV",{class:!0});var M=E(_);z&&z.l(M),I=R(M),y=v(M,"BUTTON",{class:!0});var G=E(y);A=Q(G,"Cancel"),G.forEach(n),M.forEach(n),L.forEach(n),V.forEach(n),S.forEach(n),this.h()},h(){l(f,"name","veganizethis"),l(f,"rows","10"),l(f,"cols","50"),l(f,"class","svelte-1en67h7"),l(y,"class","svelte-1en67h7"),l(_,"class","buttons svelte-1en67h7"),l(i,"name","veganizer"),l(i,"action","?/addsuggestedfood"),l(i,"method","POST"),l(o,"class","content svelte-1en67h7"),l(e,"class","modal svelte-1en67h7")},m(g,S){P(g,e,S),d(e,o),d(o,t),d(t,s),d(o,r),m&&m.m(o,null),d(o,h),d(o,i),d(i,f),me(f,a[2]),d(i,w),F&&F.m(i,null),d(i,k),d(i,_),z&&z.m(_,null),d(_,I),d(_,y),d(y,A),b=!0,C||(u=[ee(f,"input",a[8]),ee(y,"click",a[4])],C=!0)},p(g,[S]){g[1]?m?S&2&&K(m,1):(m=Ve(),m.c(),K(m,1),m.m(o,h)):m&&(ie(),B(m,1,1,()=>{m=null}),fe()),S&4&&me(f,g[2]),g[0]!==""?F?F.p(g,S):(F=ze(g),F.c(),F.m(i,k)):F&&(F.d(1),F=null),g[0]!==""?z?z.p(g,S):(z=Oe(g),z.c(),z.m(_,I)):z&&(z.d(1),z=null)},i(g){b||(K(m),b=!0)},o(g){B(m),b=!1},d(g){g&&n(e),m&&m.d(),F&&F.d(),z&&z.d(),C=!1,be(u)}}}function Je(a,e,o){let{foodLog:t}=e;const s=We();let r="";var h=!1;let i="Here's how you can veganize your daily foods, click Re-veganize button to get more ideas",f=t.map(b=>b.food_name+", Fat: "+b.fat_grams+" grams, Carbs: "+b.carbs_grams+" grams, Protein: "+b.protein_grams+" grams.").join(`
`),w=`Veganizing these foods: 

`+f;function k(){s("cancel")}async function _(b){b.preventDefault(),await I()}async function I(){o(1,h=!0);const C=JSON.stringify({veganize_this_food:f}),u=await fetch("/foodlog/[date]/veganizefood",{method:"POST",headers:{"Content-Type":"application/json"},body:C}),m=await u.json();u.ok||console.log(m),o(0,r=m.generated_food),o(1,h=!1)}function y(){return r}I();function A(){w=this.value,o(2,w)}return a.$$set=b=>{"foodLog"in b&&o(7,t=b.foodLog)},[r,h,w,i,k,_,y,t,A]}class qe extends pe{constructor(e){super(),ve(this,e,Je,Be,_e,{foodLog:7})}}function Pe(a){let e,o,t;return o=new ye({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=p("div"),ae(o.$$.fragment),this.h()},l(s){e=v(s,"DIV",{style:!0});var r=E(e);se(o.$$.fragment,r),r.forEach(n),this.h()},h(){O(e,"display","flex"),O(e,"justify-content","center"),O(e,"padding","10px")},m(s,r){P(s,e,r),le(o,e,null),t=!0},i(s){t||(K(o.$$.fragment,s),t=!0)},o(s){B(o.$$.fragment,s),t=!1},d(s){s&&n(e),ne(o)}}}function je(a){let e,o;return e=new Ge({props:{totalsData:a[16]}}),e.$on("save",a[11]),e.$on("cancel",a[12]),{c(){ae(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,s){le(e,t,s),o=!0},p:he,i(t){o||(K(e.$$.fragment,t),o=!0)},o(t){B(e.$$.fragment,t),o=!1},d(t){ne(e,t)}}}function Re(a){let e,o;return e=new qe({props:{foodLog:a[5]}}),e.$on("save",a[13]),e.$on("cancel",a[14]),{c(){ae(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,s){le(e,t,s),o=!0},p:he,i(t){o||(K(e.$$.fragment,t),o=!0)},o(t){B(e.$$.fragment,t),o=!1},d(t){ne(e,t)}}}function He(a){let e,o,t,s,r,h,i,f,w,k,_,I,y,A,b,C,u,m,F,z,g,S,V,W,L,M,G,q,U,J,H,Y,Z,te;r=new $e({props:{id:"foodautocomplete",name:"foodautocomplete",autofocus:!0,hideLabel:!0,focusAfterSelect:!0,placeholder:"Whatcha eatin'?",data:a[9],extract:a[10]}}),r.$on("keydown",a[15]);let $=a[1]&&Pe(),c=a[3]&&je(a),D=a[4]&&Re(a);return{c(){e=p("link"),o=j(),t=p("div"),s=p("form"),ae(r.$$.fragment),h=j(),i=p("form"),f=p("input"),w=j(),k=p("div"),_=p("div"),I=p("a"),y=p("i"),A=j(),b=p("div"),C=X("Food Log for "),u=X(a[6]),m=j(),F=p("div"),z=p("a"),g=p("i"),S=j(),$&&$.c(),V=j(),W=p("div"),L=j(),M=p("div"),G=p("div"),q=j(),U=p("div"),J=p("div"),H=j(),c&&c.c(),Y=j(),D&&D.c(),Z=De(),this.h()},l(T){e=v(T,"LINK",{rel:!0,href:!0}),o=R(T),t=v(T,"DIV",{style:!0});var N=E(t);s=v(N,"FORM",{action:!0,method:!0});var ue=E(s);se(r.$$.fragment,ue),ue.forEach(n),h=R(N),i=v(N,"FORM",{id:!0,action:!0,method:!0});var de=E(i);f=v(de,"INPUT",{type:!0,name:!0}),de.forEach(n),w=R(N),k=v(N,"DIV",{class:!0});var x=E(k);_=v(x,"DIV",{class:!0});var ce=E(_);I=v(ce,"A",{"data-sveltekit-reload":!0,href:!0});var re=E(I);y=v(re,"I",{class:!0,style:!0}),E(y).forEach(n),re.forEach(n),ce.forEach(n),A=R(x),b=v(x,"DIV",{class:!0});var oe=E(b);C=Q(oe,"Food Log for "),u=Q(oe,a[6]),oe.forEach(n),m=R(x),F=v(x,"DIV",{class:!0});var Te=E(F);z=v(Te,"A",{"data-sveltekit-reload":!0,href:!0});var Ee=E(z);g=v(Ee,"I",{class:!0,style:!0}),E(g).forEach(n),Ee.forEach(n),Te.forEach(n),x.forEach(n),S=R(N),$&&$.l(N),V=R(N),W=v(N,"DIV",{class:!0,id:!0});var Ae=E(W);Ae.forEach(n),L=R(N),M=v(N,"DIV",{style:!0});var we=E(M);G=v(we,"DIV",{id:!0,class:!0,style:!0}),E(G).forEach(n),we.forEach(n),q=R(N),U=v(N,"DIV",{style:!0});var ke=E(U);J=v(ke,"DIV",{id:!0,class:!0,style:!0}),E(J).forEach(n),ke.forEach(n),N.forEach(n),H=R(T),c&&c.l(T),Y=R(T),D&&D.l(T),Z=De(),this.h()},h(){l(e,"rel","stylesheet"),l(e,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),l(s,"action","?/addfood"),l(s,"method","POST"),l(f,"type","hidden"),l(f,"name","food"),l(i,"id","foodForm"),l(i,"action","?/addfood"),l(i,"method","POST"),l(y,"class","fa fa-arrow-circle-left"),O(y,"font-size","36px"),O(y,"color","blue"),O(y,"padding","10px"),l(I,"data-sveltekit-reload",""),l(I,"href","/foodlog/"+a[8]),l(_,"class","left-image"),l(b,"class","foodheader"),l(g,"class","fa fa-arrow-circle-right"),O(g,"font-size","36px"),O(g,"color","blue"),O(g,"padding","10px"),l(z,"data-sveltekit-reload",""),l(z,"href","/foodlog/"+a[7]),l(F,"class","right-image"),l(k,"class","container"),l(W,"class","grid"),l(W,"id","foodLog"),l(G,"id","totals"),l(G,"class","ag-theme-alpine"),O(G,"height","22vh"),O(G,"width","100%"),O(M,"display","flex"),O(M,"justify-content","center"),O(M,"align-items","center"),l(J,"id","datagrid"),l(J,"class","ag-theme-alpine"),O(J,"height","170vh"),O(J,"width","100%"),O(U,"display","flex"),O(U,"justify-content","center"),O(U,"align-items","center"),O(t,"text-align","center"),O(t,"margin","25px auto"),O(t,"width","85%"),O(t,"max-width","1200px")},m(T,N){P(T,e,N),P(T,o,N),P(T,t,N),d(t,s),le(r,s,null),d(t,h),d(t,i),d(i,f),d(t,w),d(t,k),d(k,_),d(_,I),d(I,y),d(k,A),d(k,b),d(b,C),d(b,u),d(k,m),d(k,F),d(F,z),d(z,g),d(t,S),$&&$.m(t,null),d(t,V),d(t,W),d(t,L),d(t,M),d(M,G),a[18](G),d(t,q),d(t,U),d(U,J),a[19](J),P(T,H,N),c&&c.m(T,N),P(T,Y,N),D&&D.m(T,N),P(T,Z,N),te=!0},p(T,N){T[1]?$?N[0]&2&&K($,1):($=Pe(),$.c(),K($,1),$.m(t,V)):$&&(ie(),B($,1,1,()=>{$=null}),fe()),T[3]?c?(c.p(T,N),N[0]&8&&K(c,1)):(c=je(T),c.c(),K(c,1),c.m(Y.parentNode,Y)):c&&(ie(),B(c,1,1,()=>{c=null}),fe()),T[4]?D?(D.p(T,N),N[0]&16&&K(D,1)):(D=Re(T),D.c(),K(D,1),D.m(Z.parentNode,Z)):D&&(ie(),B(D,1,1,()=>{D=null}),fe())},i(T){te||(K(r.$$.fragment,T),K($),K(c),K(D),te=!0)},o(T){B(r.$$.fragment,T),B($),B(c),B(D),te=!1},d(T){T&&n(e),T&&n(o),T&&n(t),ne(r),$&&$.d(),a[18](null),a[19](null),T&&n(H),c&&c.d(T),T&&n(Y),D&&D.d(T),T&&n(Z)}}}function ge(a){return a.data.label==="Target Totals"}function Xe(a){for(var e=document.getElementById("foodLog").offsetWidth,o=[],t=[],s=0,r=a.columnApi.getColumns(),h=0;h<r.length;h++){let i=r[h];if(s+=i.getMinWidth(),s>e){o.push("Food"),o.push("Fat"),o.push("Carbs"),o.push("Protein"),t.push("Qty"),t.push("Kcals"),a.columnApi.setColumnsVisible(o,!0),a.columnApi.setColumnsVisible(t,!1),a.api.sizeColumnsToFit();break}}a.api.sizeColumnsToFit()}function Qe(a){for(var e=document.getElementById("totals").offsetWidth,o=[],t=[],s=0,r=a.columnApi.getColumns(),h=0;h<r.length;h++){let i=r[h];if(s+=i.getMinWidth(),s>e){o.push("Totals"),o.push("Fat"),o.push("Carbs"),o.push("Protein"),t.push("Empty"),t.push("Kcals"),a.columnApi.setColumnsVisible(o,!0),a.columnApi.setColumnsVisible(t,!1),a.api.sizeColumnsToFit();break}}a.api.sizeColumnsToFit()}async function Ye(a,e){const o=parseInt(e.protein_grams),t=parseInt(e.carbs_grams),s=parseInt(e.fat_grams),r=o*4+t*4+s*9;e.Kcals=r,a.setDataValue("Kcals",e.Kcals);const h=JSON.stringify(e),i=await fetch("/foodlog/[date]/updaterecord",{method:"POST",headers:{"Content-Type":"application/json"},body:h}),f=await i.json();return i.ok||console.log(f),f}function Ze(a,e,o){let{data:t}=e;var s,r,h=!0,i,f;let w=!1,k=!1;const _=t.rowData,I=t.today,y=new Date(I).toISOString().split("T")[0];var A=new Date(I);A.setDate(A.getDate()+1);const b=A.toISOString().split("T")[0];var C=new Date(I);C.setDate(C.getDate()-1);const u=C.toISOString().split("T")[0];let m=t.foodReferences;m.some(c=>c.food_name.indexOf("cmd")>0)||m.push({user_id:0,food_name:"💪 /cmd Suggest some food to fit my macros",food_id:0},{user_id:0,food_name:"💪 /cmd Veganize this: suggest how to convert non-vegan foods for the day to vegan (and log them)",food_id:0});const F=c=>c.food_name;function z(){o(3,w=!0)}function g(){o(3,w=!1),o(1,h=!0)}function S(){o(3,w=!1)}function V(){console.log("showVeganizeThis"),o(4,k=!0)}function W(){o(4,k=!1),o(1,h=!0)}function L(){o(4,k=!1)}t.targetTotals,t.calculatedTotals,t.differenceTotals;const M=c=>{if(c.key=="Enter"){const D=document.getElementById("foodautocomplete").value;D.includes("/cmd Suggest some food to fit my macros")?(console.log("suggest stuff"),z()):D.includes("/cmd Veganize this")?(console.log("veganize this"),V()):(document.forms.foodForm.elements.food.value=D,document.forms.foodForm.submit(),o(1,h=!0))}};let G=[{headerName:"Food",field:"food_name",editable:!0,colId:"Food",minWidth:100,align:"left"},{headerName:"Qty",field:"food_qty",editable:!0,colId:"Qty",minWidth:100},{headerName:"Fat, g",field:"fat_grams",editable:!0,colId:"Fat",minWidth:70},{headerName:"Carbs, g",field:"carbs_grams",editable:!0,colId:"Carbs",minWidth:70},{headerName:"Protein, g",field:"protein_grams",editable:!0,colId:"Protein",minWidth:70},{headerName:"Kcals",field:"kkcals",colId:"Kcals",minWidth:120}],q=[{headerName:"Totals",field:"label",editable:!1,colId:"Totals",minWidth:100,cellStyle:c=>c.value==="Target Totals"?{color:"white",backgroundColor:"lightblue"}:c.value==="Difference"?{color:"white",backgroundColor:"red"}:{color:"white",backgroundColor:"grey"}},{headerName:"",field:"",editable:!1,colId:"Empty",minWidth:100},{headerName:"Fat, g",field:"fat_grams",editable:c=>ge(c),colId:"Fat",minWidth:70},{headerName:"Carbs, g",field:"carbs_grams",editable:c=>ge(c),colId:"Carbs",minWidth:70},{headerName:"Protein, g",field:"protein_grams",editable:c=>ge(c),colId:"Protein",minWidth:70},{headerName:"Kcals",field:"kcals",editable:!1,colId:"Kcals",minWidth:120}],U=[t.targetTotals,t.calculatedTotals,t.differenceTotals];function J(c){if(c.keyCode===46){const D=H.api.getSelectedRows();H.api.applyTransaction({remove:D})}}let H={columnDefs:G,rowData:t.rowData,rowSelection:"single",onGridReady:c=>{document.addEventListener("keydown",J)},onCellValueChanged(c){c.colDef.colId!=="Kcals"&&Ye(c.node,c.data)},onGridSizeChanged:Xe},Y={columnDefs:q,rowData:U,onCellValueChanged(c){Z(c.node,c.data,c.column.colId)},onGridSizeChanged:Qe};async function Z(c,D,T){if(T==="Kcals")return;const N=parseInt(D.protein_grams),ue=parseInt(D.carbs_grams),de=parseInt(D.fat_grams),x=N*4+ue*4+de*9;D.Kcals=x,D.feeding_date=I,c.setDataValue("Kcals",D.Kcals,{suppressCellChangedEvent:!0});const ce=JSON.stringify(D),re=await fetch("/foodlog/[date]/updatetargettotals",{method:"POST",headers:{"Content-Type":"application/json"},body:ce}),oe=await re.json();return re.ok||console.log(oe),oe}Le(()=>{r=new Ce(s,H),f=new Ce(i,Y),o(1,h=!1)}),Me(()=>{r&&r.destroy(),f&&f.destroy()});function te(c){Ie[c?"unshift":"push"](()=>{i=c,o(2,i)})}function $(c){Ie[c?"unshift":"push"](()=>{s=c,o(0,s)})}return a.$$set=c=>{"data"in c&&o(17,t=c.data)},[s,h,i,w,k,_,y,b,u,m,F,g,S,W,L,M,U,t,te,$]}class nt extends pe{constructor(e){super(),ve(this,e,Ze,He,_e,{data:17},null,[-1,-1])}}export{nt as default};
