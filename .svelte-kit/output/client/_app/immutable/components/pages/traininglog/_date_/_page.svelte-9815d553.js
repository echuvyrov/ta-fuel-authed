import{S as ke,b as we,s as Pe,e as h,t as te,c as C,d as g,f as w,g as ae,h as u,j as $,q as r,k as V,l as o,L as ge,B as Z,C as G,J as fe,D as H,E as de,r as Te,M as Ce,F as ie,G as se,u as z,H as le,I as oe,w as _e,x as $e,y as Ne,z as xe,i as Fe,m as Oe,n as Se,A as qe}from"../../../../chunks/index-6c37bd0f.js";import{G as Ue}from"../../../../chunks/ag-theme-alpine-28590e6d.js";/* empty css                                                               */import{C as Ie}from"../../../../chunks/Chasing-398c09c4.js";import{T as Ve}from"../../../../chunks/Typeahead-e84e1fed.js";function ye(i){let e,t,a;return t=new Ie({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=h("div"),ie(t.$$.fragment),this.h()},l(s){e=g(s,"DIV",{style:!0});var c=w(e);se(t.$$.fragment,c),c.forEach(u),this.h()},h(){z(e,"display","flex"),z(e,"justify-content","center"),z(e,"padding","10px")},m(s,c){V(s,e,c),le(t,e,null),a=!0},i(s){a||(G(t.$$.fragment,s),a=!0)},o(s){H(t.$$.fragment,s),a=!1},d(s){s&&u(e),oe(t)}}}function Re(i){let e,t,a,s,c,m,p,_,S,y,E,d,R,F,M,B,j,W,f=i[0]&&ye();return{c(){e=h("div"),t=h("div"),a=h("h2"),s=te("Create New Training Program"),c=C(),f&&f.c(),m=C(),p=h("form"),_=h("textarea"),S=C(),y=h("div"),E=h("button"),d=te("Save"),R=C(),F=h("button"),M=te("Cancel"),this.h()},l(N){e=g(N,"DIV",{class:!0});var P=w(e);t=g(P,"DIV",{class:!0});var A=w(t);a=g(A,"H2",{});var q=w(a);s=ae(q,"Create New Training Program"),q.forEach(u),c=$(A),f&&f.l(A),m=$(A),p=g(A,"FORM",{action:!0,method:!0});var J=w(p);_=g(J,"TEXTAREA",{name:!0,rows:!0,cols:!0,class:!0}),w(_).forEach(u),S=$(J),y=g(J,"DIV",{class:!0});var l=w(y);E=g(l,"BUTTON",{class:!0});var O=w(E);d=ae(O,"Save"),O.forEach(u),R=$(l),F=g(l,"BUTTON",{class:!0});var T=w(F);M=ae(T,"Cancel"),T.forEach(u),l.forEach(u),J.forEach(u),A.forEach(u),P.forEach(u),this.h()},h(){r(_,"name","trainingprogram"),r(_,"rows","10"),r(_,"cols","50"),r(_,"class","svelte-1en67h7"),r(E,"class","svelte-1en67h7"),r(F,"class","svelte-1en67h7"),r(y,"class","buttons svelte-1en67h7"),r(p,"action","?/createprogram"),r(p,"method","POST"),r(t,"class","content svelte-1en67h7"),r(e,"class","modal svelte-1en67h7")},m(N,P){V(N,e,P),o(e,t),o(t,a),o(a,s),o(t,c),f&&f.m(t,null),o(t,m),o(t,p),o(p,_),ge(_,i[1]),o(p,S),o(p,y),o(y,E),o(E,d),o(y,R),o(y,F),o(F,M),B=!0,j||(W=[Z(_,"input",i[4]),Z(E,"click",i[2]),Z(F,"click",i[3])],j=!0)},p(N,[P]){N[0]?f?P&1&&G(f,1):(f=ye(),f.c(),G(f,1),f.m(t,m)):f&&(fe(),H(f,1,1,()=>{f=null}),de()),P&2&&ge(_,N[1])},i(N){B||(G(f),B=!0)},o(N){H(f),B=!1},d(N){N&&u(e),f&&f.d(),j=!1,Te(W)}}}function Me(i,e,t){const a=Ce();var s=!1;let c=`Create a training program by writing out specific training area for each day.

For example:	  
 Day 1: Squats
 Day 2: Bench Press
 Day 3: 30-45 mins cardio, light Olympic lifts
 Day 4: OFF
 Day 5: Deadlifts
 Day 6: Shoulders, Arms
 Day 7: 30-45 mins cardio, calisthenics
 Day 8: OFF`;function m(){t(0,s=!0),document.forms.trainingprogram.submit(),a("save",c)}function p(){a("cancel")}function _(){c=this.value,t(1,c)}return[s,c,m,p,_]}class Ge extends ke{constructor(e){super(),we(this,e,Me,Re,Pe,{})}}function ve(i,e,t){const a=i.slice();return a[23]=e[t],a}function De(i){let e,t,a;return t=new Ie({props:{size:"60",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=h("div"),ie(t.$$.fragment),this.h()},l(s){e=g(s,"DIV",{style:!0});var c=w(e);se(t.$$.fragment,c),c.forEach(u),this.h()},h(){z(e,"display","flex"),z(e,"justify-content","center"),z(e,"padding","10px")},m(s,c){V(s,e,c),le(t,e,null),a=!0},i(s){a||(G(t.$$.fragment,s),a=!0)},o(s){H(t.$$.fragment,s),a=!1},d(s){s&&u(e),oe(t)}}}function be(i){let e,t=i[23].day_description+"",a,s,c;return{c(){e=h("button"),a=te(t),this.h()},l(m){e=g(m,"BUTTON",{class:!0});var p=w(e);a=ae(p,t),p.forEach(u),this.h()},h(){r(e,"class","trainingdaytab svelte-1krqaef")},m(m,p){V(m,e,p),o(e,a),s||(c=Z(e,"click",function(){Fe(i[11](i[23].day_description,i[23].id))&&i[11](i[23].day_description,i[23].id).apply(this,arguments)}),s=!0)},p(m,p){i=m,p&1&&t!==(t=i[23].day_description+"")&&Oe(a,t)},d(m){m&&u(e),s=!1,c()}}}function Ee(i){let e,t;return e=new Ge({}),e.$on("save",i[13]),e.$on("cancel",i[14]),{c(){ie(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,s){le(e,a,s),t=!0},p:Se,i(a){t||(G(e.$$.fragment,a),t=!0)},o(a){H(e.$$.fragment,a),t=!1},d(a){oe(e,a)}}}function Be(i){let e,t,a,s,c,m,p,_,S,y,E,d,R,F,M,B,j,W,f,N,P,A,q,J,l,O,T,L,U,K,ne,X,Y,ue,me,k=i[2]&&De(),Q=i[0].trainingProgamDays.training_days,I=[];for(let n=0;n<Q.length;n+=1)I[n]=be(ve(i,Q,n));y=new Ve({props:{id:"exerciseautocomplete",name:"exerciseautocomplete",autofocus:!0,hideLabel:!0,focusAfterSelect:!0,placeholder:"Exercise, i.e. Squat or Run",limit:5,data:i[7],extract:i[8],class:"training_input"}}),y.$on("keydown",i[10]);let D=i[3]&&Ee(i);return{c(){k&&k.c(),e=C(),t=h("div"),a=h("button"),s=te("create new training program"),c=C(),m=h("div");for(let n=0;n<I.length;n+=1)I[n].c();p=C(),_=h("div"),S=h("form"),ie(y.$$.fragment),E=C(),d=h("form"),R=h("input"),F=C(),M=h("input"),B=C(),j=h("input"),W=C(),f=h("input"),N=C(),P=h("input"),A=C(),q=h("input"),J=C(),l=h("input"),O=C(),T=h("input"),L=C(),U=h("div"),K=h("div"),ne=C(),D&&D.c(),X=_e(),this.h()},l(n){k&&k.l(n),e=$(n),t=g(n,"DIV",{class:!0});var v=w(t);a=g(v,"BUTTON",{class:!0});var b=w(a);s=ae(b,"create new training program"),b.forEach(u),v.forEach(u),c=$(n),m=g(n,"DIV",{class:!0});var ee=w(m);for(let ce=0;ce<I.length;ce+=1)I[ce].l(ee);ee.forEach(u),p=$(n),_=g(n,"DIV",{class:!0});var re=w(_);S=g(re,"FORM",{action:!0,method:!0});var pe=w(S);se(y.$$.fragment,pe),pe.forEach(u),E=$(re),d=g(re,"FORM",{id:!0,action:!0,method:!0});var x=w(d);R=g(x,"INPUT",{type:!0,name:!0}),F=$(x),M=g(x,"INPUT",{type:!0,name:!0}),B=$(x),j=g(x,"INPUT",{type:!0,name:!0}),W=$(x),f=g(x,"INPUT",{type:!0,name:!0,class:!0,width:!0}),N=$(x),P=g(x,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),A=$(x),q=g(x,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),J=$(x),l=g(x,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,width:!0}),O=$(x),T=g(x,"INPUT",{type:!0,class:!0}),x.forEach(u),re.forEach(u),L=$(n),U=g(n,"DIV",{style:!0});var he=w(U);K=g(he,"DIV",{id:!0,class:!0,style:!0}),w(K).forEach(u),he.forEach(u),ne=$(n),D&&D.l(n),X=_e(),this.h()},h(){r(a,"class","svelte-1krqaef"),r(t,"class","newProgram svelte-1krqaef"),r(m,"class","trainingdaytabs"),r(S,"action","?/addexercise"),r(S,"method","POST"),r(R,"type","hidden"),r(R,"name","day_id"),R.value=i[4],r(M,"type","hidden"),r(M,"name","day_id"),M.value=i[5],r(j,"type","hidden"),r(j,"name","exercise_date"),j.value=i[6],r(f,"type","hidden"),r(f,"name","exercise_name"),r(f,"class","training_input svelte-1krqaef"),r(f,"width","20%"),r(P,"type","text"),r(P,"name","exercise_load"),r(P,"placeholder","Load, i.e. weight or distance"),r(P,"class","training_input svelte-1krqaef"),r(P,"width","20%"),r(q,"type","text"),r(q,"name","exercise_reps"),r(q,"placeholder","Reps"),r(q,"class","training_input svelte-1krqaef"),r(q,"width","20%"),r(l,"type","text"),r(l,"name","exercise_notes"),r(l,"placeholder","Notes, i.e. how you felt or something for next time"),r(l,"class","training_input svelte-1krqaef"),r(l,"width","30%"),r(T,"type","button"),T.value="add",r(T,"class","training_input submit_button svelte-1krqaef"),r(d,"id","trainingGrid"),r(d,"action","?/addexercise"),r(d,"method","POST"),r(_,"class","exerciseandload"),r(K,"id","datagrid"),r(K,"class","ag-theme-alpine"),z(K,"height","70vh"),z(K,"width","100%"),z(U,"display","flex"),z(U,"justify-content","center"),z(U,"align-items","center")},m(n,v){k&&k.m(n,v),V(n,e,v),V(n,t,v),o(t,a),o(a,s),V(n,c,v),V(n,m,v);for(let b=0;b<I.length;b+=1)I[b]&&I[b].m(m,null);V(n,p,v),V(n,_,v),o(_,S),le(y,S,null),o(_,E),o(_,d),o(d,R),o(d,F),o(d,M),o(d,B),o(d,j),o(d,W),o(d,f),o(d,N),o(d,P),o(d,A),o(d,q),o(d,J),o(d,l),o(d,O),o(d,T),V(n,L,v),V(n,U,v),o(U,K),i[15](K),V(n,ne,v),D&&D.m(n,v),V(n,X,v),Y=!0,ue||(me=[Z(a,"click",i[12]),Z(T,"click",i[9])],ue=!0)},p(n,[v]){if(n[2]?k?v&4&&G(k,1):(k=De(),k.c(),G(k,1),k.m(e.parentNode,e)):k&&(fe(),H(k,1,1,()=>{k=null}),de()),v&2049){Q=n[0].trainingProgamDays.training_days;let b;for(b=0;b<Q.length;b+=1){const ee=ve(n,Q,b);I[b]?I[b].p(ee,v):(I[b]=be(ee),I[b].c(),I[b].m(m,null))}for(;b<I.length;b+=1)I[b].d(1);I.length=Q.length}(!Y||v&16)&&(R.value=n[4]),(!Y||v&32)&&(M.value=n[5]),n[3]?D?(D.p(n,v),v&8&&G(D,1)):(D=Ee(n),D.c(),G(D,1),D.m(X.parentNode,X)):D&&(fe(),H(D,1,1,()=>{D=null}),de())},i(n){Y||(G(k),G(y.$$.fragment,n),G(D),Y=!0)},o(n){H(k),H(y.$$.fragment,n),H(D),Y=!1},d(n){k&&k.d(n),n&&u(e),n&&u(t),n&&u(c),n&&u(m),$e(I,n),n&&u(p),n&&u(_),oe(y),n&&u(L),n&&u(U),i[15](null),n&&u(ne),D&&D.d(n),n&&u(X),ue=!1,Te(me)}}}async function je(i,e){const t=parseInt(e.protein_grams),a=parseInt(e.carbs_grams),s=parseInt(e.fat_grams),c=t*4+a*4+s*9;e.kkcals=c,i.setDataValue("kkcals",e.kkcals);const m=JSON.stringify(e);if(!(await fetch("/reference/updaterecord",{method:"POST",headers:{"Content-Type":"application/json"},body:m})).ok)throw Error(json.message)}function Ae(i,e,t){let{data:a}=e;var s,c,m=!0;let p=!1,_=0,S="";var y=[],E=[];const d=new Date,R=d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2);let F=a.exerciseReferences;F.some(l=>l.exercise_name.indexOf("cmd")>0)||F.push({user_id:0,exercise_name:"ðŸ’ª /cmd Count KCals for the Day",exercise_id:0});const M=l=>l.exercise_name;let B={columnDefs:y,rowData:E,onCellValueChanged(l){je(l.node,l.data)},rowEditable:!0,onGridReady:l=>{l.api.setRowData(E)}};const j=l=>{t(2,m=!0);const O=document.getElementById("exerciseautocomplete").value;document.forms.trainingGrid.elements.exercise_name.value=O,document.forms.trainingGrid.submit()},W=l=>{l.key=="Enter"},f=(l,O)=>{var T=document.getElementsByClassName("trainingdaytab");t(4,_=O),t(5,S=l);for(var L=0;L<T.length;L++)T[L].textContent==l?(T[L].style.backgroundColor="#007aff",a.trainingProgamDays.training_days.forEach(U=>{U.day_description==l&&(E=U.training_grid,q(),B.api.setColumnDefs(y),B.api.setRowData(E))})):T[L].style.backgroundColor="#FF3E00"};Ne(()=>{if(a.trainingProgamDays!=null){var l=a.trainingProgamDays.training_days;l!=null&&a.trainingProgamDays.training_days.length>0&&(E=a.trainingProgamDays.training_days[0].training_grid,q())}c=new Ue(s,B),a.trainingProgamDays!=null&&(a.selectedDayId==""&&a.trainingProgamDays.training_days.length>0?f(a.trainingProgamDays.training_days[0].day_description,a.trainingProgamDays.training_days[0].id):f(a.selectedDayDescription,a.selectedDayId)),t(2,m=!1)}),xe(()=>{c&&c.destroy()});function N(){t(3,p=!0)}function P(l){t(3,p=!1)}function A(){t(3,p=!1)}function q(){E!=null&&(y=[],E.forEach(l=>{for(const O in l)if(l.hasOwnProperty(O)){const T={field:O,headerName:O,editable:!0,minWidth:70,width:125};y.some(U=>U.field===O)||y.push(T)}}))}function J(l){qe[l?"unshift":"push"](()=>{s=l,t(1,s)})}return i.$$set=l=>{"data"in l&&t(0,a=l.data)},[a,s,m,p,_,S,R,F,M,j,W,f,N,P,A,J]}class We extends ke{constructor(e){super(),we(this,e,Ae,Be,Pe,{data:0})}}export{We as default};
